(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{403:function(e,t,a){"use strict";a.r(t);var s=a(0),o=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"cluster-troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cluster-troubleshooting"}},[e._v("#")]),e._v(" Cluster Troubleshooting")]),e._v(" "),t("p",[e._v("This section is to cover some common operation issues as a RunBook. Feel free to add more, or raise issues in the to ask for more in "),t("a",{attrs:{href:"https://github.com/uber/cadence-docs/issues",target:"_blank",rel:"noopener noreferrer"}},[e._v("cadence-docs"),t("OutboundLink")],1),e._v(" project.Or talk to us in Slack support channel!")]),e._v(" "),t("p",[e._v("We will keep adding more stuff. Any contribution is very welcome.")]),e._v(" "),t("h2",{attrs:{id:"errors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#errors"}},[e._v("#")]),e._v(" Errors")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("Persistence Max QPS Reached for List Operations")]),e._v(" "),t("ul",[t("li",[e._v("Check metrics to see how many List operations are performed per second on the domain. Alternatively you can enable "),t("code",[e._v("debug")]),e._v(" log level to see more details of how a List request is ratelimited, if it's a staging/QA cluster.")]),e._v(" "),t("li",[e._v("Raise the ratelimiting for the domain if you believe the default ratelimit is too low")])])]),e._v(" "),t("li",[t("code",[e._v("Failed to lock shard. Previous range ID: 132; new range ID: 133")]),e._v(" and "),t("code",[e._v("Failed to update shard. Previous range ID: 210; new range ID: 212")]),e._v(" "),t("ul",[t("li",[e._v("When this keep happening, it's very likely a critical configuration error. Either there are two clusters using the same database, or two clusters are using the same ringpop(bootstrap hosts).")])])])]),e._v(" "),t("h2",{attrs:{id:"api-high-latency-timeout-task-disptaching-slowness-or-too-many-operations-onto-db-and-timeouts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api-high-latency-timeout-task-disptaching-slowness-or-too-many-operations-onto-db-and-timeouts"}},[e._v("#")]),e._v(" API high latency, timeout, Task disptaching slowness Or Too many operations onto DB and timeouts")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("If it happens after you attemped to truncate tables inorder to reuse the same database/keyspace for a new cluster, it's possible that the data is not deleted completely. You should make sure to shutdown the Cadence when trucating, and make sure the database is cleaned. Alternatively, use a different keyspace/database is a safer way.")])]),e._v(" "),t("li",[t("p",[e._v("Timeout pushing task to matching engine, e.g. "),t("code",[e._v('"Fail to process task","service":"cadence-history","shard-id":431,"address":"172.31.48.64:7934","component":"transfer-queue-processor","cluster-name":"active","shard-id":431,"queue-task-id":590357768,"queue-task-visibility-timestamp":1637356594382077880,"xdc-failover-version":-24,"queue-task-type":0,"wf-domain-id":"f4d6824f-9d24-4a82-81e0-e0e080be4c21","wf-id":"55d64d58-e398-4bf5-88bc-a4696a2ba87f:63ed7cda-afcf-41cd-9d5a-ee5e1b0f2844","wf-run-id":"53b52ee0-3218-418e-a9bf-7768e671f9c1","error":"code:deadline-exceeded message:timeout","lifecycle":"ProcessingFailed","logging-call-at":"task.go:331"')])]),e._v(" "),t("ul",[t("li",[e._v("If this happens after traffic increased for a certain domain, it's likely that a tasklist is overloaded. Consider "),t("RouterLink",{attrs:{to:"/docs/operation-guide/maintain/#scale-up-a-tasklist-using-scalable-tasklist-feature"}},[e._v("scale up the tasklist")])],1)])]),e._v(" "),t("li",[t("p",[e._v("If the request volume aligned with the traffic increased on all domain, consider "),t("RouterLink",{attrs:{to:"/docs/operation-guide/maintain/#scale-up-down-cluster"}},[e._v("scale up the cluster")])],1)])])])}),[],!1,null,null,null);t.default=o.exports}}]);