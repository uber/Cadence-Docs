<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cluster Monitoring | Cadence</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.5b96dd04.css" as="style"><link rel="preload" href="/assets/js/app.5df12189.js" as="script"><link rel="preload" href="/assets/js/2.a2846d94.js" as="script"><link rel="preload" href="/assets/js/79.3f309ccd.js" as="script"><link rel="prefetch" href="/assets/js/10.7e2cc296.js"><link rel="prefetch" href="/assets/js/11.a14359c0.js"><link rel="prefetch" href="/assets/js/12.4bddc142.js"><link rel="prefetch" href="/assets/js/13.69de60b5.js"><link rel="prefetch" href="/assets/js/14.cb4a3b09.js"><link rel="prefetch" href="/assets/js/15.22d7386f.js"><link rel="prefetch" href="/assets/js/16.94a768d1.js"><link rel="prefetch" href="/assets/js/17.865df94f.js"><link rel="prefetch" href="/assets/js/18.8055dc25.js"><link rel="prefetch" href="/assets/js/19.25268a86.js"><link rel="prefetch" href="/assets/js/20.877e7658.js"><link rel="prefetch" href="/assets/js/21.36139edc.js"><link rel="prefetch" href="/assets/js/22.9a08fc07.js"><link rel="prefetch" href="/assets/js/23.de2297fc.js"><link rel="prefetch" href="/assets/js/24.a41dc554.js"><link rel="prefetch" href="/assets/js/25.741cfd5d.js"><link rel="prefetch" href="/assets/js/26.0cd97c0e.js"><link rel="prefetch" href="/assets/js/27.773282e0.js"><link rel="prefetch" href="/assets/js/28.fbe93560.js"><link rel="prefetch" href="/assets/js/29.aa555efa.js"><link rel="prefetch" href="/assets/js/3.07bab254.js"><link rel="prefetch" href="/assets/js/30.0c9451c2.js"><link rel="prefetch" href="/assets/js/31.1a3df981.js"><link rel="prefetch" href="/assets/js/32.0a15d1a7.js"><link rel="prefetch" href="/assets/js/33.5735e644.js"><link rel="prefetch" href="/assets/js/34.fb104969.js"><link rel="prefetch" href="/assets/js/35.c41a5391.js"><link rel="prefetch" href="/assets/js/36.8c087b44.js"><link rel="prefetch" href="/assets/js/37.a242c62d.js"><link rel="prefetch" href="/assets/js/38.76efb04c.js"><link rel="prefetch" href="/assets/js/39.a4c0352e.js"><link rel="prefetch" href="/assets/js/4.9d1aa5c3.js"><link rel="prefetch" href="/assets/js/40.fc0f9430.js"><link rel="prefetch" href="/assets/js/41.936331b0.js"><link rel="prefetch" href="/assets/js/42.1d3c73a0.js"><link rel="prefetch" href="/assets/js/43.0b850e72.js"><link rel="prefetch" href="/assets/js/44.9e37bf13.js"><link rel="prefetch" href="/assets/js/45.b6cb59a5.js"><link rel="prefetch" href="/assets/js/46.9d5ba447.js"><link rel="prefetch" href="/assets/js/47.9118bd8e.js"><link rel="prefetch" href="/assets/js/48.36a71b79.js"><link rel="prefetch" href="/assets/js/49.49c97a34.js"><link rel="prefetch" href="/assets/js/5.f20932a7.js"><link rel="prefetch" href="/assets/js/50.df006abe.js"><link rel="prefetch" href="/assets/js/51.dd9271f3.js"><link rel="prefetch" href="/assets/js/52.dcf595a4.js"><link rel="prefetch" href="/assets/js/53.dc4a0d37.js"><link rel="prefetch" href="/assets/js/54.1435de49.js"><link rel="prefetch" href="/assets/js/55.a74587b4.js"><link rel="prefetch" href="/assets/js/56.c45e68a2.js"><link rel="prefetch" href="/assets/js/57.c596554f.js"><link rel="prefetch" href="/assets/js/58.1458a38f.js"><link rel="prefetch" href="/assets/js/59.3ad89a9f.js"><link rel="prefetch" href="/assets/js/6.4a7a5fd5.js"><link rel="prefetch" href="/assets/js/60.acba184f.js"><link rel="prefetch" href="/assets/js/61.b521e402.js"><link rel="prefetch" href="/assets/js/62.ec4f0ec4.js"><link rel="prefetch" href="/assets/js/63.dc9e7fcb.js"><link rel="prefetch" href="/assets/js/64.a62efd73.js"><link rel="prefetch" href="/assets/js/65.ceb1b6b8.js"><link rel="prefetch" href="/assets/js/66.49f1b844.js"><link rel="prefetch" href="/assets/js/67.206e4ee1.js"><link rel="prefetch" href="/assets/js/68.e33c6170.js"><link rel="prefetch" href="/assets/js/69.6a04be0f.js"><link rel="prefetch" href="/assets/js/7.63ee7359.js"><link rel="prefetch" href="/assets/js/70.eb360b8e.js"><link rel="prefetch" href="/assets/js/71.a7eb831f.js"><link rel="prefetch" href="/assets/js/72.0c7167e5.js"><link rel="prefetch" href="/assets/js/73.bb695d29.js"><link rel="prefetch" href="/assets/js/74.07e853e6.js"><link rel="prefetch" href="/assets/js/75.5453c06e.js"><link rel="prefetch" href="/assets/js/76.b9f704c1.js"><link rel="prefetch" href="/assets/js/77.fef9b45e.js"><link rel="prefetch" href="/assets/js/78.830316be.js"><link rel="prefetch" href="/assets/js/8.4be0c3e7.js"><link rel="prefetch" href="/assets/js/80.5757a391.js"><link rel="prefetch" href="/assets/js/81.e823479e.js"><link rel="prefetch" href="/assets/js/82.301efb74.js"><link rel="prefetch" href="/assets/js/83.f9a6bf2f.js"><link rel="prefetch" href="/assets/js/84.cfb59fa4.js"><link rel="prefetch" href="/assets/js/85.f267cb1d.js"><link rel="prefetch" href="/assets/js/9.f2d87c4e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5b96dd04.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo-white.svg" alt="Cadence" class="logo"> <span class="site-name can-hide">Cadence</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/get-started/" class="nav-link">
  Get Started
</a></li><li class="dropdown-item"><!----> <a href="/docs/use-cases/" class="nav-link">
  Use cases
</a></li><li class="dropdown-item"><!----> <a href="/docs/concepts/" class="nav-link">
  Concepts
</a></li><li class="dropdown-item"><!----> <a href="/docs/java-client/" class="nav-link">
  Java client
</a></li><li class="dropdown-item"><!----> <a href="/docs/go-client/" class="nav-link">
  Go client
</a></li><li class="dropdown-item"><!----> <a href="/docs/cli/" class="nav-link">
  Command line interface
</a></li><li class="dropdown-item"><!----> <a href="/docs/operation-guide/" class="nav-link router-link-active">
  Operation Guide
</a></li><li class="dropdown-item"><!----> <a href="/GLOSSARY.html" class="nav-link">
  Glossary
</a></li><li class="dropdown-item"><!----> <a href="/docs/about/" class="nav-link">
  About
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Client" class="dropdown-title"><span class="title">Client</span> <span class="arrow down"></span></button> <button type="button" aria-label="Client" class="mobile-dropdown-title"><span class="title">Client</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.javadoc.io/doc/com.uber.cadence/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://mvnrepository.com/artifact/com.uber.cadence/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Client
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://godoc.org/go.uber.org/cadence" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Go Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-go/cadence-client/releases/latest" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Go Client
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github Discussion
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stackoverflow.com/questions/tagged/cadence-workflow" target="_blank" rel="noopener noreferrer" class="nav-link external">
  StackOverflow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github Issues
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://t.uber.com/cadence-slack" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Service and CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-go/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Go Client
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-common/cadence-samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Go Client Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-java/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Java Client
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-java-samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Java Client Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Web UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker" class="dropdown-title"><span class="title">Docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docker" class="mobile-dropdown-title"><span class="title">Docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://hub.docker.com/r/ubercadence/server/tags" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Service
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://hub.docker.com/r/ubercadence/cli/tags" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://hub.docker.com/r/ubercadence/web/tags" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Web UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/get-started/" class="nav-link">
  Get Started
</a></li><li class="dropdown-item"><!----> <a href="/docs/use-cases/" class="nav-link">
  Use cases
</a></li><li class="dropdown-item"><!----> <a href="/docs/concepts/" class="nav-link">
  Concepts
</a></li><li class="dropdown-item"><!----> <a href="/docs/java-client/" class="nav-link">
  Java client
</a></li><li class="dropdown-item"><!----> <a href="/docs/go-client/" class="nav-link">
  Go client
</a></li><li class="dropdown-item"><!----> <a href="/docs/cli/" class="nav-link">
  Command line interface
</a></li><li class="dropdown-item"><!----> <a href="/docs/operation-guide/" class="nav-link router-link-active">
  Operation Guide
</a></li><li class="dropdown-item"><!----> <a href="/GLOSSARY.html" class="nav-link">
  Glossary
</a></li><li class="dropdown-item"><!----> <a href="/docs/about/" class="nav-link">
  About
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Client" class="dropdown-title"><span class="title">Client</span> <span class="arrow down"></span></button> <button type="button" aria-label="Client" class="mobile-dropdown-title"><span class="title">Client</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.javadoc.io/doc/com.uber.cadence/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://mvnrepository.com/artifact/com.uber.cadence/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Client
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://godoc.org/go.uber.org/cadence" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Go Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-go/cadence-client/releases/latest" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Go Client
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github Discussion
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stackoverflow.com/questions/tagged/cadence-workflow" target="_blank" rel="noopener noreferrer" class="nav-link external">
  StackOverflow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github Issues
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://t.uber.com/cadence-slack" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Service and CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-go/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Go Client
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-common/cadence-samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Go Client Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber-java/cadence-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Java Client
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-java-samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Java Client Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Web UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/uber/cadence-docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker" class="dropdown-title"><span class="title">Docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docker" class="mobile-dropdown-title"><span class="title">Docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://hub.docker.com/r/ubercadence/server/tags" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Service
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://hub.docker.com/r/ubercadence/cli/tags" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://hub.docker.com/r/ubercadence/web/tags" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cadence Web UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/docs/01-get-started" class="sidebar-heading clickable"><span>Get Started</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/02-use-cases" class="sidebar-heading clickable"><span>Use cases</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/03-concepts" class="sidebar-heading clickable"><span>Concepts</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/04-java-client" class="sidebar-heading clickable"><span>Java client</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/05-go-client" class="sidebar-heading clickable"><span>Go client</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/docs/cli/" class="sidebar-link">Command line interface</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/07-operation-guide/" class="sidebar-heading clickable open"><span>Production Operation</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/operation-guide/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/docs/operation-guide/setup/" class="sidebar-link">Cluster Configuration</a></li><li><a href="/docs/operation-guide/maintain/" class="sidebar-link">Cluster Maintenance</a></li><li><a href="/docs/operation-guide/monitor/" aria-current="page" class="active sidebar-link">Cluster Monitoring</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#instructions" class="sidebar-link">Instructions</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#datadog-dashboard-templates" class="sidebar-link">DataDog dashboard templates</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#grafana-prometheus-dashboard-templates" class="sidebar-link">Grafana+Prometheus dashboard templates</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#periodic-tests-canary-for-health-check" class="sidebar-link">Periodic tests(Canary) for health check</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#cadence-frontend-monitoring" class="sidebar-link">Cadence Frontend Monitoring</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#cadence-application-monitoring" class="sidebar-link">Cadence Application Monitoring</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#cadence-history-service-monitoring" class="sidebar-link">Cadence History Service Monitoring</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#cadence-matching-service-monitoring" class="sidebar-link">Cadence Matching Service Monitoring</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#cadence-default-persistence-monitoring" class="sidebar-link">Cadence Default Persistence Monitoring</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#cadence-advanced-visibility-persistence-monitoring-if-applicable" class="sidebar-link">Cadence Advanced Visibility Persistence Monitoring(if applicable)</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#cadence-dependency-metrics-monitor-suggestion" class="sidebar-link">Cadence Dependency Metrics Monitor suggestion</a></li><li class="sidebar-sub-header"><a href="/docs/operation-guide/monitor/#cadence-service-slo-recommendation" class="sidebar-link">Cadence Service SLO Recommendation</a></li></ul></li><li><a href="/docs/operation-guide/troubleshooting/" class="sidebar-link">Cluster Troubleshooting</a></li><li><a href="/docs/operation-guide/migration/" class="sidebar-link">Cluster Migration</a></li></ul></section></li><li><a href="/GLOSSARY.html" class="sidebar-link">Glossary</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs/08-about" class="sidebar-heading clickable"><span>About</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cluster-monitoring"><a href="#cluster-monitoring" class="header-anchor">#</a> Cluster Monitoring</h1> <h2 id="instructions"><a href="#instructions" class="header-anchor">#</a> Instructions</h2> <p>Cadence emits metrics for both Server and client libraries:</p> <ul><li><p>Follow this example to emit <a href="https://github.com/uber-common/cadence-samples/pull/36" target="_blank" rel="noopener noreferrer">client side metrics for Golang client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>You can use other metrics emitter like <a href="https://github.com/uber-go/tally/tree/master/m3" target="_blank" rel="noopener noreferrer">M3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Alternatively, you can implement the tally <a href="https://github.com/uber-go/tally/blob/master/reporter.go" target="_blank" rel="noopener noreferrer">Reporter interface<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>Follow this example to emit <a href="https://github.com/uber/cadence-java-samples/blob/master/src/main/java/com/uber/cadence/samples/hello/HelloMetric.java" target="_blank" rel="noopener noreferrer">client side metrics for Java client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> if using 3.x client, or <a href="https://github.com/longquanzheng/cadence-java-samples-1/pull/1" target="_blank" rel="noopener noreferrer">this example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> if using 2.x client.</p> <ul><li>You can use other metrics emitter like <a href="https://github.com/uber-java/tally/tree/master/m3" target="_blank" rel="noopener noreferrer">M3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Alternatively, you can implement the tally <a href="https://github.com/uber-java/tally/blob/master/core/src/main/java/com/uber/m3/tally/Scope.java" target="_blank" rel="noopener noreferrer">Reporter interface<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>For running Cadence services in production, please follow this <a href="https://github.com/banzaicloud/banzai-charts/blob/master/cadence/templates/server-service-monitor.yaml" target="_blank" rel="noopener noreferrer">example of hemlchart<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to emit server side metrics. Or you can follow <a href="https://github.com/uber/cadence/blob/master/config/development_prometheus.yaml#L40" target="_blank" rel="noopener noreferrer">the example of local environment<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to Prometheus. All services need to expose a HTTP port to provide metircs like below</p></li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">metrics</span><span class="token punctuation">:</span>
  <span class="token key atrule">prometheus</span><span class="token punctuation">:</span>
    <span class="token key atrule">timerType</span><span class="token punctuation">:</span> <span class="token string">&quot;histogram&quot;</span>
    <span class="token key atrule">listenAddress</span><span class="token punctuation">:</span> <span class="token string">&quot;0.0.0.0:8001&quot;</span>
</code></pre></div><p>The rest of the instruction uses local environment as an example.</p> <p>For testing local server emitting metrics to Promethues, the easiest way is to use <a href="https://github.com/uber/cadence/blob/master/docker/" target="_blank" rel="noopener noreferrer">docker-compose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to start a local Cadence instance.</p> <p>Make sure to update the <code>prometheus_config.yml</code> to add &quot;host.docker.internal:9098&quot; to the scrape list before starting the docker-compose:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">scrape_interval</span><span class="token punctuation">:</span> 5s
  <span class="token key atrule">external_labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">monitor</span><span class="token punctuation">:</span> <span class="token string">'cadence-monitor'</span>
<span class="token key atrule">scrape_configs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">job_name</span><span class="token punctuation">:</span> <span class="token string">'prometheus'</span>
    <span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token comment"># addresses to scrape</span>
          <span class="token punctuation">-</span> <span class="token string">'cadence:9090'</span>
          <span class="token punctuation">-</span> <span class="token string">'cadence:8000'</span>
          <span class="token punctuation">-</span> <span class="token string">'cadence:8001'</span>
          <span class="token punctuation">-</span> <span class="token string">'cadence:8002'</span>
          <span class="token punctuation">-</span> <span class="token string">'cadence:8003'</span>
          <span class="token punctuation">-</span> <span class="token string">'host.docker.internal:9098'</span>
</code></pre></div><p>Note: <code>host.docker.internal</code> <a href="https://docs.docker.com/docker-for-mac/networking/#use-cases-and-workarounds" target="_blank" rel="noopener noreferrer">may not work for some docker versions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><p>After updating the prometheus_config.yaml as above, run <code>docker-compose up</code> to start the local Cadence instance</p></li> <li><p>Go the the sample repo, build the helloworld sample <code>make helloworld</code> and run the worker <code>./bin/helloworld -m worker</code>, and then in another Shell start a workflow <code>./bin/helloworld</code></p></li> <li><p>Go to your <a href="http://localhost:9090/" target="_blank" rel="noopener noreferrer">local Prometheus dashboard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, you should be able to check the metrics emitted by handler from client/frontend/matching/history/sysWorker and confirm your services are healthy through <a href="http://localhost:9090/targets" target="_blank" rel="noopener noreferrer">targets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <img width="1192" alt="Screen Shot 2021-02-20 at 11 31 11 AM" src="https://user-images.githubusercontent.com/4523955/108606555-8d0dfb80-736f-11eb-968d-7678df37455c.png"></p></li> <li><p>Go to <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">local Grafana<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> , login as <code>admin/admin</code>.</p></li> <li><p>Configure Prometheus as datasource: use <code>http://host.docker.internal:9090</code> as URL of prometheus.</p></li> <li><p>Import the <a href="/docs/operation-guide/monitor/#grafana-prometheus-dashboard-templates">Grafana dashboard tempalte</a> as JSON files.</p></li></ul> <p>Client side dashboard looks like this:
<img width="1513" alt="Screen Shot 2021-02-20 at 12 32 23 PM" src="https://user-images.githubusercontent.com/4523955/108607838-b7fc4d80-7377-11eb-8fd9-edc0e58afaad.png"></p> <p>And server basic dashboard:
<img width="1514" alt="Screen Shot 2021-02-20 at 12 31 54 PM" src="https://user-images.githubusercontent.com/4523955/108607843-baf73e00-7377-11eb-9759-e67a1a00f442.png"></p> <img width="1519" alt="Screen Shot 2021-02-20 at 11 06 54 AM" src="https://user-images.githubusercontent.com/4523955/108606577-b169d800-736f-11eb-8fcb-88801f23b656.png"> <h2 id="datadog-dashboard-templates"><a href="#datadog-dashboard-templates" class="header-anchor">#</a> DataDog dashboard templates</h2> <p>This <a href="https://github.com/uber/cadence-docs/tree/master/src/datadog" target="_blank" rel="noopener noreferrer">package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> contains examples of Cadence dashboards with DataDog.</p> <ul><li><p><code>Cadence-Client</code> is the dashboard that includes all the metrics to help you understand Cadence client behavior. Most of these metrics are emitted by the client SDKs, with a few exceptions from server side (for example, workflow timeout).</p></li> <li><p><code>Cadence-Server</code> is the the server dashboard that you can use to monitor and undertand the health and status of your Cadence cluster.</p></li></ul> <p>To use DataDog with Cadence, follow <a href="https://docs.datadoghq.com/integrations/guide/prometheus-metrics/" target="_blank" rel="noopener noreferrer">this instruction<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to collect Prometheus metrics using DataDog agent.</p> <p>NOTE1: don't forget to adjust <code>max_returned_metrics</code> to a higher number(e.g. 100000). Otherwise DataDog agent won't be able to <a href="https://docs.datadoghq.com/integrations/guide/prometheus-host-collection/" target="_blank" rel="noopener noreferrer">collect all metrics(default is 2000)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>NOTE2: the template contains templating variables <code>$App</code> and <code>$Availability_Zone</code>. Feel free to remove them if you don't have them in your setup.</p> <h2 id="grafana-prometheus-dashboard-templates"><a href="#grafana-prometheus-dashboard-templates" class="header-anchor">#</a> Grafana+Prometheus dashboard templates</h2> <p>This <a href="https://github.com/uber/cadence-docs/tree/master/src/grafana/prometheus" target="_blank" rel="noopener noreferrer">package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> contains examples of Cadence dashboards with Prometheus.</p> <ul><li><p><code>Cadence-Client</code> is the dashboard of client metrics, and a few server side metrics that belong to client side but have to be emitted by server(for example, workflow timeout).</p></li> <li><p><code>Cadence-Server-Basic</code> is the the basic server dashboard to monitor/navigate the health/status of a Cadence cluster.</p></li> <li><p>Apart from the basic server dashboard, it's recommended to set up dashboards on different components for Cadence server: Frontend, History, Matching, Worker, Persistence, Archival, etc. Any <a href="https://github.com/uber/cadence-docs" target="_blank" rel="noopener noreferrer">contribution<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is always welcome to enrich the existing templates or new templates!</p></li></ul> <h2 id="periodic-tests-canary-for-health-check"><a href="#periodic-tests-canary-for-health-check" class="header-anchor">#</a> Periodic tests(Canary) for health check</h2> <p>It's recommended that you run periodical test to get signals on the healthness of your cluster. Please following instructions in <a href="https://github.com/uber/cadence/tree/master/canary" target="_blank" rel="noopener noreferrer">our canary package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to set these tests up.</p> <h2 id="cadence-frontend-monitoring"><a href="#cadence-frontend-monitoring" class="header-anchor">#</a> Cadence Frontend Monitoring</h2> <p>This section describes recommended dashboards for monitoring Cadence services in your cluster. The structure mostly follows the DataDog dashboard template listed above.</p> <h3 id="service-availability-server-metrics"><a href="#service-availability-server-metrics" class="header-anchor">#</a> Service Availability(server metrics)</h3> <ul><li>Meaning: the availability of Cadence server using server metrics.</li> <li>Suggested monitor: below 95% &gt; 5 min then alert, below 99% for &gt; 5 min triggers a warning</li> <li>Monitor action: When fired, check if there is any persistence errors.  If so then check the healthness of the database(may need to restart or scale up). If not then check the error logs.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.cadence_errors{*}
sum:cadence_frontend.cadence_requests{*}
(1 - a / b) * 100
</code></pre></div><h3 id="startworkflow-per-second"><a href="#startworkflow-per-second" class="header-anchor">#</a> StartWorkflow Per Second</h3> <ul><li>Meaning: how many workflows are started per second. This helps determine if your server is overloaded.</li> <li>Suggested monitor: This is a business metrics. No monitoring required.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.cadence_requests{(operation IN (startworkflowexecution,signalwithstartworkflowexecution))} by {operation}.as_rate()
</code></pre></div><h3 id="activities-started-per-second"><a href="#activities-started-per-second" class="header-anchor">#</a> Activities Started Per Second</h3> <ul><li>Meaning: How many activities are started per second. Helps determine if the server is overloaded.</li> <li>Suggested monitor: This is a business metrics. No monitoring required.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.cadence_requests{operation:pollforactivitytask} by {operation}.as_rate()
</code></pre></div><h3 id="decisions-started-per-second"><a href="#decisions-started-per-second" class="header-anchor">#</a> Decisions Started Per Second</h3> <ul><li>Meaning: How many workflow decisions are started per second. Helps determine if the server is overloaded.</li> <li>Suggested monitor: This is a business metrics. No monitoring required.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.cadence_requests{operation:pollfordecisiontask} by {operation}.as_rate()
</code></pre></div><h3 id="periodical-test-suite-success-aka-canary"><a href="#periodical-test-suite-success-aka-canary" class="header-anchor">#</a> Periodical Test Suite Success(aka Canary)</h3> <ul><li>Meaning: The success counter of canary test suite</li> <li>Suggested monitor: Monitor needed. If fired, look at the failed canary test case and investigate the reason of failure.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_history.workflow_success{workflowtype:workflow_sanity} by {workflowtype}.as_count()
</code></pre></div><h3 id="frontend-all-api-per-second"><a href="#frontend-all-api-per-second" class="header-anchor">#</a> Frontend all API per second</h3> <ul><li>Meaning: all API on frontend per second. Information only.</li> <li>Suggested monitor: This is a business metrics. No monitoring required.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.cadence_requests{*}.as_rate()
</code></pre></div><h3 id="frontend-api-per-second-breakdown-per-operation"><a href="#frontend-api-per-second-breakdown-per-operation" class="header-anchor">#</a> Frontend API per second (breakdown per operation)</h3> <ul><li>Meaning: API on frontend per second. Information only.</li> <li>Suggested monitor: This is a business metrics. No monitoring required.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.cadence_requests{*} by {operation}.as_rate()
</code></pre></div><h3 id="frontend-api-errors-per-second-breakdown-per-operation"><a href="#frontend-api-errors-per-second-breakdown-per-operation" class="header-anchor">#</a> Frontend API errors per second(breakdown per operation)</h3> <ul><li>Meaning: API error on frontend per second. Information only.</li> <li>Suggested monitor: This is to facilitate investigation. No monitoring required.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.cadence_errors{*} by {operation}.as_rate()  
sum:cadence_frontend.cadence_errors_bad_request{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_domain_not_active{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_service_busy{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_entity_not_exists{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_workflow_execution_already_completed{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_execution_already_started{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_domain_already_exists{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_cancellation_already_requested{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_query_failed{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_limit_exceeded{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_context_timeout{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_retry_task{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_bad_binary{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_client_version_not_supported{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_incomplete_history{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_nondeterministic{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_unauthorized{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_authorize_failed{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_remote_syncmatch_failed{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_domain_name_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_identity_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_workflow_id_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_signal_name_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_workflow_type_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_request_id_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_task_list_name_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_activity_id_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_activity_type_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_marker_name_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_frontend.cadence_errors_timer_id_exceeded_warn_limit{*} by {operation}.as_rate() 
</code></pre></div><ul><li><code>cadence_errors</code> is internal service errors.</li> <li>any <code>cadence_errors_*</code> is client side error</li></ul> <h3 id="frontend-regular-api-latency"><a href="#frontend-regular-api-latency" class="header-anchor">#</a> Frontend Regular API Latency</h3> <ul><li>Meaning: The latency of regular core API -- excluding long-poll/queryWorkflow/getHistory/ListWorkflow/CountWorkflow API.</li> <li>Suggested monitor: 95% of all apis and of all operations that take over 1.5 seconds triggers a warning,  over 2 seconds triggers an alert</li> <li>Monitor action: If fired, investigate the database read/write latency. May need to throttle some spiky traffic from certain domains, or scale up the database</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_frontend.cadence_latency.quantile{(operation NOT IN (pollfordecisiontask,pollforactivitytask,getworkflowexecutionhistory,queryworkflow,listworkflowexecutions,listclosedworkflowexecutions,listopenworkflowexecutions)) AND $pXXLatency} by {operation}
</code></pre></div><h3 id="frontend-listworkflow-api-latency"><a href="#frontend-listworkflow-api-latency" class="header-anchor">#</a> Frontend ListWorkflow API Latency</h3> <ul><li>Meaning: The latency of ListWorkflow API.</li> <li>Monitor: 95% of all apis and of all operations that take over 2 seconds triggers a warning,  over 3 seconds triggers an alert</li> <li>Monitor action: If fired, investigate the ElasticSearch read latency. May need to throttle some spiky traffic from certain domains, or scale up ElasticSearch cluster.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_frontend.cadence_latency.quantile{(operation IN (listclosedworkflowexecutions,listopenworkflowexecutions,listworkflowexecutions,countworkflowexecutions)) AND $pXXLatency} by {operation}
</code></pre></div><h3 id="frontend-long-poll-api-latency"><a href="#frontend-long-poll-api-latency" class="header-anchor">#</a> Frontend Long Poll API Latency</h3> <ul><li>Meaning: Long poll means that the worker is waiting for a task. The latency is an Indicator for how busy the worker is. Poll for activity task and poll for decision task are the types of long poll requests.The api call times out at 50 seconds if no task can be picked up.A very low latency could mean that more workers need to be added.</li> <li>Suggested monitor: No monitor needed as long latency is expected.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_frontend.cadence_latency.quantile{$pXXLatency,operation:pollforactivitytask} by {operation}
avg:cadence_frontend.cadence_latency.quantile{$pXXLatency,operation:pollfordecisiontask} by {operation}
</code></pre></div><h3 id="frontend-get-history-query-workflow-api-latency"><a href="#frontend-get-history-query-workflow-api-latency" class="header-anchor">#</a> Frontend Get History/Query Workflow API Latency</h3> <ul><li>Meaning: GetHistory API acts like a long poll api, but theres no explicit timeout. Long-poll of GetHistory is being used when WorkflowClient is waiting for the result of the workflow(essentially, WorkflowExecutionCompletedEvent).
This latency depends on the time it takes for the workflow to complete. QueryWorkflow API latency is also unpredictable as it depends on the availability and performance of workflow workers, which are owned by the application and workflow implementation(may require replaying history).</li> <li>Suggested monitor: No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_frontend.cadence_latency.quantile{(operation IN (getworkflowexecutionhistory,queryworkflow)) AND $pXXLatency} by {operation}
</code></pre></div><h3 id="frontend-workflowclient-api-per-seconds-by-domain"><a href="#frontend-workflowclient-api-per-seconds-by-domain" class="header-anchor">#</a> Frontend WorkflowClient API per seconds by domain</h3> <ul><li>Meaning: Shows which domains are making the most requests using WorkflowClient(excluding worker API like PollForDecisionTask and RespondDecisionTaskCompleted). Used for troubleshooting.
In the future it can be used to set some rate limiting per domain.</li> <li>Suggested monitor: No monitor needed.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.cadence_requests{(operation IN (signalwithstartworkflowexecution,signalworkflowexecution,startworkflowexecution,terminateworkflowexecution,resetworkflowexecution,requestcancelworkflowexecution,listworkflowexecutions))} by {domain,operation}.as_rate()
</code></pre></div><h2 id="cadence-application-monitoring"><a href="#cadence-application-monitoring" class="header-anchor">#</a> Cadence Application Monitoring</h2> <p>This section describes the recommended dashboards for monitoring Cadence application using metrics emitted by SDK. See the <code>setup</code> section about how to collect those metrics.</p> <h3 id="workflow-start-and-successful-completion"><a href="#workflow-start-and-successful-completion" class="header-anchor">#</a> Workflow Start and Successful completion</h3> <ul><li>Workflow successfully started/signalWithStart and completed/canceled/continuedAsNew</li> <li>Monitor: not recommended</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_workflow_start{$Domain,$Tasklist,$WorkflowType} by {workflowtype,env,domain,tasklist}.as_rate()
sum:cadence_client.cadence_workflow_completed{$Domain,$Tasklist,$WorkflowType} by {workflowtype,env,domain,tasklist}.as_rate()
sum:cadence_client.cadence_workflow_canceled{$Domain,$Tasklist,$WorkflowType} by {workflowtype,domain,env,tasklist}.as_rate()
sum:cadence_client.cadence_workflow_continue_as_new{$Domain,$Tasklist,$WorkflowType} by {workflowtype,domain,env,tasklist}.as_rate()
sum:cadence_client.cadence_workflow_signal_with_start{$Domain,$Tasklist,$WorkflowType} by {workflowtype,domain,env,tasklist}.as_rate()
</code></pre></div><h3 id="workflow-failure"><a href="#workflow-failure" class="header-anchor">#</a> Workflow Failure</h3> <ul><li>Metrics for all types of failures, including workflow failures(throw uncaught exceptions), workflow timeout and termination.</li> <li>For timeout and termination, workflow worker doesnt have a chance to emit metrics when its terminate, so the metric comes from the history service</li> <li>Monitor: application should set monitor on timeout and failure to make sure workflow are not failing. Cancel/terminate are usually triggered by human intentionally.</li> <li>When the metrics fire, go to Cadence UI to find the failed workflows and investigate the workflow history to understand the type of failure</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_workflow_failed{$Domain,$Tasklist,$WorkflowType} by {workflowtype,domain,env}.as_count()
sum:cadence_history.workflow_failed{$Domain,$WorkflowType} by {domain,env,workflowtype}.as_count()
sum:cadence_history.workflow_terminate{$Domain,$WorkflowType} by {domain,env,workflowtype}.as_count()
sum:cadence_history.workflow_timeout{$Domain,$WorkflowType} by {domain,env,workflowtype}.as_count()
</code></pre></div><h3 id="decision-poll-counters"><a href="#decision-poll-counters" class="header-anchor">#</a> Decision Poll Counters</h3> <ul><li>Indicates if the workflow worker is available and is polling tasks. If the worker is not available no counters will show.
Can also check if the worker is using the right task list.
No task poll type means that the worker exists and is idle.
The timeout for this long poll api is 50 seconds. If no task is received within 50 seconds, then an empty response will be returned and another long poll request will be sent.</li> <li>Monitor: application can should monitor on it to make sure workers are available</li> <li>When fires, investigate the worker deployment to see why they are not available, also check if they are using the right domain/tasklist</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_decision_poll_total{$Domain,$Tasklist}.as_count()
sum:cadence_client.cadence_decision_poll_failed{$Domain,$Tasklist}.as_count()
sum:cadence_client.cadence_decision_poll_no_task{$Domain,$Tasklist}.as_count()
sum:cadence_client.cadence_decision_poll_succeed{$Domain,$Tasklist}.as_count()
</code></pre></div><h3 id="decisiontasks-scheduled-per-second"><a href="#decisiontasks-scheduled-per-second" class="header-anchor">#</a> DecisionTasks Scheduled per second</h3> <ul><li>Indicate how many decision tasks are scheduled</li> <li>Monitor: not recommended -- Information only to know whether or not a tasklist is overloaded</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_matching.cadence_requests_per_tl{*,operation:adddecisiontask,$Tasklist,$Domain} by {tasklist,domain}.as_rate()
</code></pre></div><h3 id="decision-scheduled-to-start-latency"><a href="#decision-scheduled-to-start-latency" class="header-anchor">#</a> Decision Scheduled To Start Latency</h3> <ul><li>If this latency is too high then either:
The worker is not available or too busy after the task has been scheduled.
The task list is overloaded(confirmed by DecisionTaskScheduled per second widget). By default a task list only has one partition and a partition can only be owned by one host and so the throughput of a task list is limited. More task lists can be added to scale or a scalable task list can be used to add more partitions.</li> <li>Monitor: application can set monitor on it to make sure latency is tolerable</li> <li>When fired, check if worker capacity is enough, then check if tasklist is overloaded. If needed, contact the Cadence cluster Admin to enable scalable tasklist to add more partitions to the tasklist</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_client.cadence_decision_scheduled_to_start_latency.avg{$Domain,$Tasklist} by {env,domain,tasklist}
max:cadence_client.cadence_decision_scheduled_to_start_latency.max{$Domain,$Tasklist} by {env,domain,tasklist}
max:cadence_client.cadence_decision_scheduled_to_start_latency.95percentile{$Domain,$Tasklist} by {env,domain,tasklist}
</code></pre></div><h3 id="workflow-end-to-end-latency"><a href="#workflow-end-to-end-latency" class="header-anchor">#</a> Workflow End to End Latency</h3> <ul><li>This is for the client application to track their SLOs
For example, if you expect a workflow to take duration d to complete, you can use this latency to set a monitor.</li> <li>Monitor: application can monitor this metrics if expecting workflow to complete within a certain duration.</li> <li>When fired, investigate the workflow history to see the workflow takes longer than expected to complete</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_client.cadence_workflow_endtoend_latency.median{$Domain,$Tasklist,$WorkflowType} by {env,domain,tasklist,workflowtype}
avg:cadence_client.cadence_workflow_endtoend_latency.95percentile{$Domain,$Tasklist,$WorkflowType} by {env,domain,tasklist,workflowtype}
</code></pre></div><h3 id="workflow-panic-and-nondeterministicerror"><a href="#workflow-panic-and-nondeterministicerror" class="header-anchor">#</a> Workflow Panic and NonDeterministicError</h3> <ul><li>These errors mean that there is a bug in the code and the deploy should be rolled back.</li> <li>A monitor should be set on this metric</li> <li>When fired, you may rollback the deployment to mitigate your issue. Usually this caused by bad (non-backward compatible) code change. After rollback, look at your worker error logs to see where the bug is.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_worker_panic{$Domain} by {env,domain}.as_rate()
sum:cadence_client.cadence_non_deterministic_error{$Domain} by {env,domain}.as_rate()
</code></pre></div><h3 id="workflow-sticky-cache-hit-rate-and-miss-count"><a href="#workflow-sticky-cache-hit-rate-and-miss-count" class="header-anchor">#</a> Workflow Sticky Cache Hit Rate and Miss Count</h3> <ul><li>This metric can be used for performance optimization.
This can be improved by adding more worker instances, or adjust the workerOption(GoSDK) or WorkferFactoryOption(Java SDK).
CacheHitRate too low means workers will have to replay history to rebuild the workflow stack when executing a decision task. Depending on the the history size
<ul><li>If less than 1MB, then its okay to be lower than 50%</li> <li>If greater than 1MB, then its okay to be greater than 50%</li> <li>If greater than 5MB, , then its okay to be greater than 60%</li> <li>If greater than 10MB , then its okay to be greater than 70%</li> <li>If greater than 20MB , then its okay to be greater than 80%</li> <li>If greater than 30MB , then its okay to be greater than 90%</li> <li>Workflow history size should never be greater than 50MB.</li></ul></li> <li>A monitor can be set on this metric, if performance is important.</li> <li>When fired, adjust the stickyCacheSize in the WorkerFactoryOption, or add more workers</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_sticky_cache_miss{$Domain} by {env,domain}.as_count()
sum:cadence_client.cadence_sticky_cache_hit{$Domain} by {env,domain}.as_count()
(b / (a+b)) * 100
</code></pre></div><h3 id="activity-task-operations"><a href="#activity-task-operations" class="header-anchor">#</a> Activity Task Operations</h3> <ul><li>Activity started/completed counters</li> <li>Monitor: not recommended</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_activity_task_failed{$Domain,$Tasklist} by {activitytype}.as_rate()
sum:cadence_client.cadence_activity_task_completed{$Domain,$Tasklist} by {activitytype}.as_rate()
sum:cadence_client.cadence_activity_task_timeouted{$Domain,$Tasklist} by {activitytype}.as_rate()
</code></pre></div><h3 id="activity-execution-latency"><a href="#activity-execution-latency" class="header-anchor">#</a> Activity Execution Latency</h3> <ul><li>If its expected that an activity will take x amount of time to complete, a monitor on this metric could be helpful to enforce that expectation.</li> <li>Monitor: application can set monitor on it if expecting workflow start/complete activities with certain latency</li> <li>When fired, investigate the activity code and its dependencies</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_client.cadence_activity_execution_latency.avg{$Domain,$Tasklist} by {env,domain,tasklist,activitytype}
max:cadence_client.cadence_activity_execution_latency.max{$Domain,$Tasklist} by {env,domain,tasklist,activitytype}
</code></pre></div><h3 id="activity-poll-counters"><a href="#activity-poll-counters" class="header-anchor">#</a> Activity Poll Counters</h3> <ul><li>Indicates the activity worker is available and is polling tasks. If the worker is not available no counters will show.
Can also check if the worker is using the right task list.
No task poll type means that the worker exists and is idle.
The timeout for this long poll api is 50 seconds. If within that 50 seconds, no task is received then an empty response will be returned and another long poll request will be sent.</li> <li>Monitor: application can set monitor on it to make sure activity workers are available</li> <li>When fires, investigate the worker deployment to see why they are not available, also check if they are using the right domain/tasklist</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_activity_poll_total{$Domain,$Tasklist} by {activitytype}.as_count()
sum:cadence_client.cadence_activity_poll_failed{$Domain,$Tasklist} by {activitytype}.as_count()
sum:cadence_client.cadence_activity_poll_succeed{$Domain,$Tasklist} by {activitytype}.as_count()
sum:cadence_client.cadence_activity_poll_no_task{$Domain,$Tasklist} by {activitytype}.as_count()
</code></pre></div><h3 id="activitytasks-scheduled-per-second"><a href="#activitytasks-scheduled-per-second" class="header-anchor">#</a> ActivityTasks Scheduled per second</h3> <ul><li>Indicate how many activities tasks are scheduled</li> <li>Monitor: not recommended -- Information only to know whether or not a tasklist is overloaded</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_matching.cadence_requests_per_tl{*,operation:addactivitytask,$Tasklist,$Domain} by {tasklist,domain}.as_rate()
</code></pre></div><h3 id="activity-scheduled-to-start-latency"><a href="#activity-scheduled-to-start-latency" class="header-anchor">#</a> Activity Scheduled To Start Latency</h3> <ul><li>If the latency is too high either:
The worker is not available or too busy
There are too many activities scheduled into the same tasklist and the tasklist is not scalable. Same as Decision Scheduled To Start Latency</li> <li>Monitor: application Should set monitor on it</li> <li>When fired, check if workers are enough, then check if the tasklist is overloaded. If needed, contact the Cadence cluster Admin to enable scalable tasklist to add more partitions to the tasklist</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_client.cadence_activity_scheduled_to_start_latency.avg{$Domain,$Tasklist} by {env,domain,tasklist,activitytype}
max:cadence_client.cadence_activity_scheduled_to_start_latency.max{$Domain,$Tasklist} by {env,domain,tasklist,activitytype}
max:cadence_client.cadence_activity_scheduled_to_start_latency.95percentile{$Domain,$Tasklist} by {env,domain,tasklist,activitytype}
</code></pre></div><h3 id="activity-failure"><a href="#activity-failure" class="header-anchor">#</a> Activity Failure</h3> <ul><li>A monitor on this metric will alert the team that activities are failing
The activity timeout metrics are emitted by the history service, because a timeout causes a hard stop and the client doesnt have time to emit metrics.</li> <li>Monitor: application can set monitor on it</li> <li>When fired, investigate the activity code and its dependencies</li> <li><code>cadence_activity_execution_failed</code> vs <code>cadence_activity_task_failed</code>:
Only have different when using RetryPolicy
cadence_activity_task_failed counter increase per activity attempt
cadence_activity_execution_failed counter increase when activity fails after all attempts</li> <li>should only monitor on cadence_activity_execution_failed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_activity_execution_failed{$Domain} by {domain,env}.as_rate()
sum:cadence_client.cadence_activity_task_panic{$Domain} by {domain,env}.as_count()
sum:cadence_client.cadence_activity_task_failed{$Domain} by {domain,env}.as_rate()
sum:cadence_client.cadence_activity_task_canceled{$Domain} by {domain,env}.as_count()
sum:cadence_history.heartbeat_timeout{$Domain} by {domain,env}.as_count()
sum:cadence_history.schedule_to_start_timeout{$Domain} by {domain,env}.as_rate()
sum:cadence_history.start_to_close_timeout{$Domain} by {domain,env}.as_rate()
sum:cadence_history.schedule_to_close_timeout{$Domain} by {domain,env}.as_count()
</code></pre></div><h3 id="service-api-success-rate"><a href="#service-api-success-rate" class="header-anchor">#</a> Service API success rate</h3> <ul><li>The clients experience of the service availability. It encompasses many apis. Things that could affect the services API success rate are:
<ul><li>Service availability</li> <li>The network could have issues.</li> <li>A required api is not available.</li> <li>Client side errors like EntityNotExists, WorkflowAlreadyStarted etc. This means that application code has potential bugs of calling Cadence service.</li></ul></li> <li>Monitor: application can set monitor on it</li> <li>When fired, check application logs to see if the error is Cadence server error or client side error. Error like EntityNotExists/ExecutionAlreadyStarted/QueryWorkflowFailed/etc are client side error, meaning that the application is misusing the APIs. If most errors are server side errors(internalServiceError), you can contact Cadence admin.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_error{*} by {domain}.as_count()
sum:cadence_client.cadence_request{*} by {domain}.as_count()
(1 - a / b) * 100
</code></pre></div><h3 id="service-api-latency"><a href="#service-api-latency" class="header-anchor">#</a> Service API Latency</h3> <ul><li>The latency of the API, excluding long poll APIs.</li> <li>Application can set monitor on certain APIs, if necessary.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_client.cadence_latency.95percentile{$Domain,!cadence_metric_scope:cadence-pollforactivitytask,!cadence_metric_scope:cadence-pollfordecisiontask} by {cadence_metric_scope}
</code></pre></div><h3 id="service-api-breakdown"><a href="#service-api-breakdown" class="header-anchor">#</a> Service API Breakdown</h3> <ul><li>A counter breakdown by API to help investigate availability</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_request{$Domain,!cadence_metric_scope:cadence-pollforactivitytask,!cadence_metric_scope:cadence-pollfordecisiontask} by {cadence_metric_scope}.as_count()
</code></pre></div><h3 id="service-api-error-breakdown"><a href="#service-api-error-breakdown" class="header-anchor">#</a> Service API Error Breakdown</h3> <ul><li>A counter breakdown by API error to help investigate availability</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_client.cadence_error{$Domain} by {cadence_metric_scope}.as_count()
</code></pre></div><h3 id="max-event-blob-size"><a href="#max-event-blob-size" class="header-anchor">#</a> Max Event Blob size</h3> <ul><li>By default the max size is 2 MB. If the input is greater than the max size the server will reject the request.
The size of a single history event. This applies to any event input, like start workflow event, start activity event, or signal event.
It should never be greater than 2MB.</li> <li>A monitor should be set on this metric.</li> <li>When fired, please review the design/code ASAP to reduce the blob size. Reducing the input/output of workflow/activity/signal will help.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>max:cadence_history.event_blob_size.quantile{!domain:all,$Domain} by {domain}
</code></pre></div><h3 id="max-history-size"><a href="#max-history-size" class="header-anchor">#</a> Max History Size</h3> <ul><li>Workflow history cannot grow indefinitely. It will cause replay issues.
If the workflow exceeds the historys max size the workflow will be terminate automatically. The max size by default is 200 megabytes.
As a suggestion for workflow design, workflow history should never grow greater than 50MB. Use continueAsNew to break long workflows into multiple runs.</li> <li>A monitor should be set on this metric.</li> <li>When fired, please review the design/code ASAP to reduce the history size. Reducing the input/output of workflow/activity/signal will help. Also you may need to use ContinueAsNew to break a single execution into smaller pieces.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>max:cadence_history.history_size.quantile{!domain:all,$Domain} by {domain}
</code></pre></div><h3 id="max-history-length"><a href="#max-history-length" class="header-anchor">#</a> Max History Length</h3> <ul><li>The number of events of workflow history.
It should never be greater than 50K(workflow exceeding 200K events will be terminated by server). Use continueAsNew to break long workflows into multiple runs.</li> <li>A monitor should be set on this metric.</li> <li>When fired, please review the design/code ASAP to reduce the history length. You may need to use ContinueAsNew to break a single execution into smaller pieces.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>max:cadence_history.history_count.quantile{!domain:all,$Domain} by {domain}
</code></pre></div><h2 id="cadence-history-service-monitoring"><a href="#cadence-history-service-monitoring" class="header-anchor">#</a> Cadence History Service Monitoring</h2> <p>History is the most critical/core service for cadence which implements the workflow logic.</p> <h3 id="history-shard-movements"><a href="#history-shard-movements" class="header-anchor">#</a> History shard movements</h3> <ul><li>Should only happen during deployment or when the node restarts.
If theres shard movement without deployments then thats unexpected and theres probably a performance issue. The shard ownership is assigned by a particular history host, so if the shard is moving itll be hard for the frontend service to route a request to a particular history shard and to find it.</li> <li>A monitor can be set to be alerted on shard movements without deployment.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_history.membership_changed_count{operation:shardcontroller}
sum:cadence_history.shard_closed_count{operation:shardcontroller}
sum:cadence_history.sharditem_created_count{operation:shardcontroller}
sum:cadence_history.sharditem_removed_count{operation:shardcontroller}
</code></pre></div><h3 id="transfer-tasks-per-second"><a href="#transfer-tasks-per-second" class="header-anchor">#</a> Transfer Tasks Per Second</h3> <ul><li>TransferTask is an internal background task that moves workflow state and transfers an action task from the history engine to another service(e.g. Matching service, ElasticSearch, etc)</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_history.task_requests{operation:transferactivetask*} by {operation}.as_rate()
</code></pre></div><h3 id="timer-tasks-per-second"><a href="#timer-tasks-per-second" class="header-anchor">#</a> Timer Tasks Per Second</h3> <ul><li>Timer tasks are tasks that are scheduled to be triggered at a given time in future. For example, workflow.sleep() will wait an x amount of time then the task will be pushed somewhere for a worker to pick up.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_history.task_requests{operation:timeractivetask*} by {operation}.as_rate()
</code></pre></div><h3 id="transfer-tasks-per-domain"><a href="#transfer-tasks-per-domain" class="header-anchor">#</a> Transfer Tasks Per Domain</h3> <ul><li>Count breakdown by domain</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_history.task_requests_per_domain{operation:transferactive*} by {domain}.as_count()
</code></pre></div><h3 id="timer-tasks-per-domain"><a href="#timer-tasks-per-domain" class="header-anchor">#</a> Timer Tasks Per Domain</h3> <ul><li>Count breakdown by domain</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_history.task_requests_per_domain{operation:timeractive*} by {domain}.as_count()
</code></pre></div><h3 id="transfer-latency-by-type"><a href="#transfer-latency-by-type" class="header-anchor">#</a> Transfer Latency by Type</h3> <ul><li>If latency is too high then its an issue for a workflow. For example, if transfer task latency is 5 second, then it takes 5 second for activity/decision to actual receive the task.</li> <li>Monitor should be set on diffeernt types of latency. Note that <code>queue_latency</code> can go very high during deployment and it's expected. See below NOTE for explanation.</li> <li>When fired, check if its due to some persistence issue.
If so then investigate the database(may need to scale up)
If not then see if need to scale up Cadence deployment(K8s instance)</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_history.task_latency.quantile{$pXXLatency,operation:transfer*} by {operation}
avg:cadence_history.task_latency_processing.quantile{$pXXLatency,operation:transfer*} by {operation}
avg:cadence_history.task_latency_queue.quantile{$pXXLatency,operation:transfer*} by {operation}
</code></pre></div><h3 id="timer-task-latency-by-type"><a href="#timer-task-latency-by-type" class="header-anchor">#</a> Timer Task Latency by type</h3> <ul><li>If latency is too high then its an issue for a workflow. For example, if you set the workflow.sleep() for 10 seconds and the timer latency is 5 secs then the workflow will sleep for 15 seconds.</li> <li>Monitor should be set on diffeernt types of latency.</li> <li>When fired, check if its due to some persistence issue.
If so then investigate the database(may need to scale up) [Mostly]
If not then see if need to scale up Cadence deployment(K8s instance)</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_history.task_latency.quantile{$pXXLatency,operation:timer*} by {operation}
avg:cadence_history.task_latency_processing.quantile{$pXXLatency,operation:timer*} by {operation}
avg:cadence_history.task_latency_queue.quantile{$pXXLatency,operation:timer*} by {operation}
</code></pre></div><h3 id="note-task-queue-latency-vs-executing-latency-vs-processing-latency-in-transfer-timer-task-latency-metrics"><a href="#note-task-queue-latency-vs-executing-latency-vs-processing-latency-in-transfer-timer-task-latency-metrics" class="header-anchor">#</a> NOTE: Task Queue Latency vs Executing Latency vs Processing Latency In Transfer &amp; Timer Task Latency Metrics</h3> <ul><li><code>task_latency_queue</code>: Queue Latency is end to end latency for users. The latency could go to several minutes during deployment because of metrics being re-emitted (but the actual latency is not that high)</li> <li><code>task_latency</code>: Executing latency is the time from submission to executing pool to completion. It includes scheduling, retry and processing time of the task.</li> <li><code>task_latency_processing</code>: Processing latency is the processing time of the task of a single attempt(without retry)</li></ul> <h3 id="transfer-task-latency-per-domain"><a href="#transfer-task-latency-per-domain" class="header-anchor">#</a> Transfer Task Latency Per Domain</h3> <ul><li>Latency breakdown by domain</li> <li>No monitor needed.</li> <li>Datadog query example: modify above queries to use domain tag.</li></ul> <h3 id="timer-task-latency-per-domain"><a href="#timer-task-latency-per-domain" class="header-anchor">#</a> Timer Task Latency Per Domain</h3> <ul><li>Latency breakdown by domain</li> <li>No monitor needed.</li> <li>Datadog query example: modify above queries to use domain tag.</li></ul> <h3 id="history-api-per-second"><a href="#history-api-per-second" class="header-anchor">#</a> History API per Second</h3> <p>Information about history API
Datadog query example</p> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_history.cadence_requests{*} by {operation}.as_rate()
</code></pre></div><h3 id="history-api-errors-per-second"><a href="#history-api-errors-per-second" class="header-anchor">#</a> History API Errors per Second</h3> <ul><li>Information about history API</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_history.cadence_errors{*} by {operation}.as_rate()
sum:cadence_history.cadence_errors_bad_request{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_domain_not_active{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_service_busy{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_entity_not_exists{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_workflow_execution_already_completed{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_execution_already_started{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_domain_already_exists{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_cancellation_already_requested{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_query_failed{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_limit_exceeded{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_context_timeout{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_retry_task{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_bad_binary{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_client_version_not_supported{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_incomplete_history{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_nondeterministic{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_unauthorized{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_authorize_failed{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_remote_syncmatch_failed{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_domain_name_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_identity_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_workflow_id_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_signal_name_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_workflow_type_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_request_id_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_task_list_name_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_activity_id_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_activity_type_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_marker_name_exceeded_warn_limit{*} by {operation}.as_rate() 
sum:cadence_history.cadence_errors_timer_id_exceeded_warn_limit{*} by {operation}.as_rate() 
</code></pre></div><ul><li><code>cadence_errors</code> is internal service errors.</li> <li>any <code>cadence_errors_*</code> is client side error</li></ul> <h3 id="max-history-size-2"><a href="#max-history-size-2" class="header-anchor">#</a> Max History Size</h3> <p>The history size of the workflow cannot be too large otherwise it will cause performance issue during replay. The soft limit is 200MB. If exceeding workflow will be terminated by server.</p> <ul><li>No monitor needed</li> <li>Datadog query is same as the client section</li></ul> <h3 id="max-history-length-2"><a href="#max-history-length-2" class="header-anchor">#</a> Max History Length</h3> <p>Similarly, the history length of the workflow cannot be too large otherwise it will cause performance issues during replay. The soft limit is 200K events. If exceeding, workflow will be terminated by server.</p> <ul><li>No monitor needed</li> <li>Datadog query is same as the client section</li></ul> <h3 id="max-event-blob-size-2"><a href="#max-event-blob-size-2" class="header-anchor">#</a> Max Event Blob Size</h3> <ul><li>The size of each event(e.g. Decided by input/output of workflow/activity/signal/chidlWorkflow/etc) cannot be too large otherwise it will also cause performance issue. The soft limit is 2MB. If exceeding, the requests will be rejected by server, meaning that workflow wont be able to make any progress.</li> <li>No monitor needed</li> <li>Datadog query is same as the client section</li></ul> <h2 id="cadence-matching-service-monitoring"><a href="#cadence-matching-service-monitoring" class="header-anchor">#</a> Cadence Matching Service Monitoring</h2> <p>Matching service is to match/assign tasks from cadence service to workers. Matching got the tasks from history service. If workers are active the task will be matched immediately , Its called sync match. If workers are not available, matching will persist into database and then reload the tasks when workers are back(called async match)</p> <h3 id="matching-apis-per-second"><a href="#matching-apis-per-second" class="header-anchor">#</a> Matching APIs per Second</h3> <ul><li>API processed by matching service per second</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_matching.cadence_requests{*} by {operation}.as_rate()
</code></pre></div><h3 id="matching-api-errors-per-second"><a href="#matching-api-errors-per-second" class="header-anchor">#</a> Matching API Errors per Second</h3> <ul><li>API errors by matching service per second</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_matching.cadence_errors_per_tl{*} by {operation,domain,tasklist}.as_rate()
sum:cadence_matching.cadence_errors_bad_request_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_bad_request{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_domain_not_active_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_domain_not_active{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_service_busy_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_service_busy{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_entity_not_exists_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_entity_not_exists{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_execution_already_started_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_execution_already_started{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_domain_already_exists_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_domain_already_exists{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_cancellation_already_requested_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_cancellation_already_requested{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_query_failed_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_query_failed{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_limit_exceeded_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_limit_exceeded{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_context_timeout_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_context_timeout{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_retry_task_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_retry_task{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_bad_binary_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_bad_binary{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_client_version_not_supported_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_client_version_not_supported{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_incomplete_history_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_incomplete_history{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_nondeterministic_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_nondeterministic{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_unauthorized_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_unauthorized{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_authorize_failed_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_authorize_failed{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_remote_syncmatch_failed_per_tl{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_remote_syncmatch_failed{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_shard_ownership_lost{*} by {operation,domain,tasklist}
sum:cadence_matching.cadence_errors_event_already_started{*} by {operation,domain,tasklist}
</code></pre></div><ul><li><code>cadence_errors</code> is internal service errors.</li> <li>any <code>cadence_errors_*</code> is client side error</li></ul> <h3 id="matching-regular-api-latency"><a href="#matching-regular-api-latency" class="header-anchor">#</a> Matching Regular API Latency</h3> <ul><li>Regular APIs are the APIs excluding long polls</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_matching.cadence_latency_per_tl.quantile{$pXXLatency,!operation:pollfor*,!operation:queryworkflow} by {operation,tasklist}
</code></pre></div><h3 id="sync-match-latency"><a href="#sync-match-latency" class="header-anchor">#</a> Sync Match Latency:</h3> <ul><li>If the latency is too high, probably the tasklist is overloaded. Consider using multiple tasklist, or enable scalable tasklist feature by adding more partition to the tasklist(default is one)
To confirm if there are too many tasks being added to the tasklist, use AddTasks per second - domain, tasklist breakdown</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_matching.syncmatch_latency_per_tl.quantile{$pXXLatency} by {operation,tasklist,domain}
</code></pre></div><h3 id="async-match-latency"><a href="#async-match-latency" class="header-anchor">#</a> Async match Latency</h3> <ul><li>If a match is done asynchronously it writes a match to the db to use later. Measures the time when the worker is not actively looking for tasks. If this is high, more workers are needed.</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_matching.asyncmatch_latency_per_tl.quantile{$pXXLatency} by {operation,tasklist,domain}
</code></pre></div><h2 id="cadence-default-persistence-monitoring"><a href="#cadence-default-persistence-monitoring" class="header-anchor">#</a> Cadence Default Persistence Monitoring</h2> <p>The following monotors should be set up for Cadence persistence.</p> <h3 id="persistence-availability"><a href="#persistence-availability" class="header-anchor">#</a> Persistence Availability</h3> <ul><li>The availability of the primary database for your Cadence server</li> <li>Monitor required: Below 95% &gt; 5min then alert, below 99% triggers a slack warning</li> <li>When fired, check if its due to some persistence issue.
If so then investigate the database(may need to scale up) [Mostly]
If not then see if need to scale up Cadence deployment(K8s instance)</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.persistence_errors{*} by {operation}.as_count()
sum:cadence_frontend.persistence_requests{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors{*} by {operation}.as_count()
sum:cadence_matching.persistence_requests{*} by {operation}.as_count()
sum:cadence_history.persistence_errors{*} by {operation}.as_count()
sum:cadence_history.persistence_requests{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors{*} by {operation}.as_count()
sum:cadence_worker.persistence_requests{*} by {operation}.as_count()
(1 - a / b) * 100
(1 - c / d) * 100
(1 - e / f) * 100
(1 - g / h) * 100
</code></pre></div><h3 id="persistence-by-service-tps"><a href="#persistence-by-service-tps" class="header-anchor">#</a> Persistence By Service TPS</h3> <ul><li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.persistence_requests{*}.as_rate()
sum:cadence_history.persistence_requests{*}.as_rate()
sum:cadence_worker.persistence_requests{*}.as_rate()
sum:cadence_matching.persistence_requests{*}.as_rate()
</code></pre></div><h3 id="persistence-by-operation-tps"><a href="#persistence-by-operation-tps" class="header-anchor">#</a> Persistence By Operation TPS</h3> <ul><li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.persistence_requests{*} by {operation}.as_rate()
sum:cadence_history.persistence_requests{*} by {operation}.as_rate()
sum:cadence_worker.persistence_requests{*} by {operation}.as_rate()
sum:cadence_matching.persistence_requests{*} by {operation}.as_rate()
</code></pre></div><h3 id="persistence-by-operation-latency"><a href="#persistence-by-operation-latency" class="header-anchor">#</a> Persistence By Operation Latency</h3> <ul><li>Monitor required, alert if 95% of all operation latency is greater than 1 second for 5mins, warning if greater than 0.5 seconds</li> <li>When fired, investigate the database(may need to scale up) [Mostly]
If theres a high latency, then there could be errors or something wrong with the db</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_matching.persistence_latency.quantile{$pXXLatency} by {operation}
avg:cadence_worker.persistence_latency.quantile{$pXXLatency} by {operation}
avg:cadence_frontend.persistence_latency.quantile{$pXXLatency} by {operation}
avg:cadence_history.persistence_latency.quantile{$pXXLatency} by {operation}
</code></pre></div><h3 id="persistence-error-by-operation-count"><a href="#persistence-error-by-operation-count" class="header-anchor">#</a> Persistence Error By Operation Count</h3> <ul><li>It's to help investigate availability issue</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.persistence_errors{*} by {operation}.as_count()
sum:cadence_history.persistence_errors{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_shard_exists{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_shard_ownership_lost{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_condition_failed{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_current_workflow_condition_failed{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_timeout{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_busy{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_entity_not_exists{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_execution_already_started{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_domain_already_exists{*} by {operation}.as_count()
sum:cadence_frontend.persistence_errors_bad_request{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_shard_exists{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_shard_ownership_lost{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_condition_failed{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_current_workflow_condition_failed{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_timeout{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_busy{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_entity_not_exists{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_execution_already_started{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_domain_already_exists{*} by {operation}.as_count()
sum:cadence_history.persistence_errors_bad_request{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_shard_exists{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_shard_ownership_lost{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_condition_failed{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_current_workflow_condition_failed{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_timeout{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_busy{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_entity_not_exists{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_execution_already_started{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_domain_already_exists{*} by {operation}.as_count()
sum:cadence_matching.persistence_errors_bad_request{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_shard_exists{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_shard_ownership_lost{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_condition_failed{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_current_workflow_condition_failed{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_timeout{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_busy{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_entity_not_exists{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_execution_already_started{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_domain_already_exists{*} by {operation}.as_count()
sum:cadence_worker.persistence_errors_bad_request{*} by {operation}.as_count()
</code></pre></div><ul><li><code>cadence_errors</code> is internal service errors.</li> <li>any <code>cadence_errors_*</code> is client side error</li></ul> <h2 id="cadence-advanced-visibility-persistence-monitoring-if-applicable"><a href="#cadence-advanced-visibility-persistence-monitoring-if-applicable" class="header-anchor">#</a> Cadence Advanced Visibility Persistence Monitoring(if applicable)</h2> <p>Kafka &amp; ElasticSearch are only for visibility. Only applicable if using advanced visibility.
For writing visibility records, Cadence history service will write down the records into Kafka, and then Cadence worker service will read from Kafka and write into ElasticSearch(in batch, for performance optimization)
For reading visibility records, Frontend service will query ElasticSearch directly.</p> <h3 id="persistence-availability-2"><a href="#persistence-availability-2" class="header-anchor">#</a> Persistence Availability</h3> <ul><li>The availability of Cadence server using database</li> <li>Monitor can be set</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.elasticsearch_errors{*} by {operation}.as_count()
sum:cadence_frontend.elasticsearch_requests{*} by {operation}.as_count()
sum:cadence_history.elasticsearch_errors{*} by {operation}.as_count()
sum:cadence_history.elasticsearch_requests{*} by {operation}.as_count()
(1 - a / b) * 100
(1 - c / d) * 100
</code></pre></div><h3 id="persistence-by-service-tps-2"><a href="#persistence-by-service-tps-2" class="header-anchor">#</a> Persistence By Service TPS</h3> <ul><li>The error of persistence API call by service</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.elasticsearch_requests{*}.as_rate()
sum:cadence_history.elasticsearch_requests{*}.as_rate()
</code></pre></div><h3 id="persistence-by-operation-tps-read-es-write-kafka"><a href="#persistence-by-operation-tps-read-es-write-kafka" class="header-anchor">#</a> Persistence By Operation TPS(read: ES, write: Kafka)</h3> <ul><li>The rate of persistence API call by API</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.elasticsearch_requests{*} by {operation}.as_rate()
sum:cadence_history.elasticsearch_requests{*} by {operation}.as_rate()
</code></pre></div><h3 id="persistence-by-operation-latency-in-seconds-read-es-write-kafka"><a href="#persistence-by-operation-latency-in-seconds-read-es-write-kafka" class="header-anchor">#</a> Persistence By Operation Latency(in seconds) (read: ES, write: Kafka)</h3> <ul><li>The latency of persistence API call</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>avg:cadence_frontend.elasticsearch_latency.quantile{$pXXLatency} by {operation}
avg:cadence_history.elasticsearch_latency.quantile{$pXXLatency} by {operation}
</code></pre></div><h3 id="persistence-error-by-operation-count-read-es-write-kafka"><a href="#persistence-error-by-operation-count-read-es-write-kafka" class="header-anchor">#</a> Persistence Error By Operation Count (read: ES, write: Kafka)</h3> <ul><li>The error of persistence API call</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_frontend.elasticsearch_errors{*} by {operation}.as_count()
sum:cadence_history.elasticsearch_errors{*} by {operation}.as_count()
</code></pre></div><h3 id="kafka-es-processor-counter"><a href="#kafka-es-processor-counter" class="header-anchor">#</a> Kafka-&gt;ES processor counter</h3> <ul><li>This is the metrics of a background processing: consuming Kafka messages and then populate to ElasticSearch in batch</li> <li>Monitor on the running of the background processing(counter metrics is &gt; 0)</li> <li>When fired, restart Cadence service first to mitigate. Then look at logs to see why the process is stopped(process panic/error/etc).
May consider add more pods (replicaCount) to sys-worker service for higher availability</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_worker.es_processor_requests{*} by {operation}.as_count()
sum:cadence_worker.es_processor_retries{*} by {operation}.as_count()
</code></pre></div><h3 id="kafka-es-processor-error"><a href="#kafka-es-processor-error" class="header-anchor">#</a> Kafka-&gt;ES processor error</h3> <ul><li>This is the error metrics of the above processing logic
Almost all errors are retryable errors so its not a problem.</li> <li>Need to monitor error</li> <li>When fired, Go to Kibana to find logs about the error details.
The most common error is missing the ElasticSearch index field -- an index field is added in dynamicconfig but not in ElasticSearch, or vice versa . If so, follow the runbook to add the field to ElasticSearch or dynamic config.</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_worker.es_processor_error{*} by {operation}.as_count()
sum:cadence_worker.es_processor_corrupted_data{*} by {operation}.as_count()
</code></pre></div><h3 id="kafka-es-processor-latency"><a href="#kafka-es-processor-latency" class="header-anchor">#</a> Kafka-&gt;ES processor latency</h3> <ul><li>The latency of the processing logic</li> <li>No monitor needed</li> <li>Datadog query example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sum:cadence_worker.es_processor_process_msg_latency.quantile{$pXXLatency} by {operation}.as_count()
</code></pre></div><h2 id="cadence-dependency-metrics-monitor-suggestion"><a href="#cadence-dependency-metrics-monitor-suggestion" class="header-anchor">#</a> Cadence Dependency Metrics Monitor suggestion</h2> <h3 id="computing-platform-metrics-for-cadence-deployment"><a href="#computing-platform-metrics-for-cadence-deployment" class="header-anchor">#</a> Computing platform metrics for Cadence deployment</h3> <p>Cadence server being deployed on any computing platform(e.g. Kubernetese) should be monitored on the blow metrics:</p> <ul><li>CPU</li> <li>Memory</li></ul> <h3 id="database"><a href="#database" class="header-anchor">#</a> Database</h3> <p>Depends on which database, you should at least monitor on the below metrics</p> <ul><li>Disk Usage</li> <li>CPU</li> <li>Memory</li> <li>Read API latency</li> <li>Write API Latency</li></ul> <h3 id="kafka-if-applicable"><a href="#kafka-if-applicable" class="header-anchor">#</a> Kafka (if applicable)</h3> <ul><li>Disk Usage</li> <li>CPU</li> <li>Memory</li></ul> <h3 id="elasticsearch-if-applicable"><a href="#elasticsearch-if-applicable" class="header-anchor">#</a> ElasticSearch (if applicable)</h3> <ul><li>Disk Usage</li> <li>CPU</li> <li>Memory</li></ul> <h2 id="cadence-service-slo-recommendation"><a href="#cadence-service-slo-recommendation" class="header-anchor">#</a> Cadence Service SLO Recommendation</h2> <ul><li>Core API availability: 99.9%</li> <li>Core API latency: &lt;1s</li> <li>Overall task dispatch latency: &lt;2s (queue_latency for transfer task and timer task)</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/uber/cadence-docs/edit/master/src/docs/07-operation-guide/03-monitoring.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/docs/operation-guide/maintain/" class="prev">
        Cluster Maintenance
      </a></span> <span class="next"><a href="/docs/operation-guide/troubleshooting/">
        Cluster Troubleshooting
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.5df12189.js" defer></script><script src="/assets/js/2.a2846d94.js" defer></script><script src="/assets/js/79.3f309ccd.js" defer></script>
  </body>
</html>
