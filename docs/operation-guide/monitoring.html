<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-operation-guide/monitoring" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Cluster Monitoring | Cadence</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cadence-workflow.github.io/Cadence-Docs/img/social-card-min.jpg"><meta data-rh="true" name="twitter:image" content="https://cadence-workflow.github.io/Cadence-Docs/img/social-card-min.jpg"><meta data-rh="true" property="og:url" content="https://cadence-workflow.github.io/Cadence-Docs/docs/operation-guide/monitoring"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cluster Monitoring | Cadence"><meta data-rh="true" name="description" content="Instructions"><meta data-rh="true" property="og:description" content="Instructions"><link data-rh="true" rel="icon" href="/Cadence-Docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cadence-workflow.github.io/Cadence-Docs/docs/operation-guide/monitoring"><link data-rh="true" rel="alternate" href="https://cadence-workflow.github.io/Cadence-Docs/docs/operation-guide/monitoring" hreflang="en"><link data-rh="true" rel="alternate" href="https://cadence-workflow.github.io/Cadence-Docs/docs/operation-guide/monitoring" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://J7SVDVT89Z-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/Cadence-Docs/blog/rss.xml" title="Cadence RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cadence-Docs/blog/atom.xml" title="Cadence Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W63QD8QE6E"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-W63QD8QE6E",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=G-W63QD8QE6E",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Cadence" href="/Cadence-Docs/opensearch.xml"><link rel="stylesheet" href="/Cadence-Docs/assets/css/styles.fc45ed42.css">
<script src="/Cadence-Docs/assets/js/runtime~main.c6fd6437.js" defer="defer"></script>
<script src="/Cadence-Docs/assets/js/main.9458f101.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=G-W63QD8QE6E" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">We are looking to hear your feedback, please fill the <a target="_blank" rel="noopener noreferrer" href="https://www.surveymonkey.com/r/9RL7YX9">Cadence 2024 OSS community survey</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Cadence-Docs/"><div class="navbar__logo"><img src="/Cadence-Docs/img/cadence-logo.svg" alt="Cadence Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Cadence-Docs/img/logo-white.svg" alt="Cadence Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Cadence-Docs/docs/get-started">Docs</a><a class="navbar__item navbar__link" href="/Cadence-Docs/blog">Blog</a><a class="navbar__item navbar__link" href="/Cadence-Docs/community/support">Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Repositories</a><ul class="dropdown__menu"><li><a href="https://github.com/cadence-workflow/cadence" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence Service<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-go-client" target="_blank" rel="noopener noreferrer" class="dropdown__link">Go Client<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-java-client" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java Client<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-samples" target="_blank" rel="noopener noreferrer" class="dropdown__link">Go Samples<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-java-samples" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java Samples<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-web" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence Web<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-idl" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence IDLs<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-charts" target="_blank" rel="noopener noreferrer" class="dropdown__link">Helm Charts<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/get-started">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/use-cases">Use Cases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/concepts">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/java-client">Java Client</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/go-client">Go Client</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/cli">Command Line Interface</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Cadence-Docs/docs/operation-guide">Production Operation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/operation-guide">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/operation-guide/setup">Cluster Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/operation-guide/maintain">Cluster Maintenance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Cadence-Docs/docs/operation-guide/monitoring">Cluster Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/operation-guide/troubleshooting">Cluster Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/operation-guide/migration">Cluster Migration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/workflow-troubleshooting">Workflow Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/about">About</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Cadence-Docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Production Operation</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Cluster Monitoring</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cluster Monitoring</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="instructions">Instructions<a href="#instructions" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions">​</a></h2>
<p>Cadence emits metrics for both Server and client libraries:</p>
<ul>
<li>
<p>Follow this example to emit <a href="https://github.com/cadence-workflow/cadence-samples/pull/36" target="_blank" rel="noopener noreferrer">client side metrics for Golang client</a></p>
<ul>
<li>You can use other metrics emitter like <a href="https://github.com/uber-go/tally/tree/master/m3" target="_blank" rel="noopener noreferrer">M3</a></li>
<li>Alternatively, you can implement the tally <a href="https://github.com/uber-go/tally/blob/master/reporter.go" target="_blank" rel="noopener noreferrer">Reporter interface</a></li>
</ul>
</li>
<li>
<p>Follow this example to emit <a href="https://github.com/cadence-workflow/cadence-java-samples/blob/master/src/main/java/com/uber/cadence/samples/hello/HelloMetric.java" target="_blank" rel="noopener noreferrer">client side metrics for Java client</a> if using 3.x client, or <a href="https://github.com/longquanzheng/cadence-java-samples-1/pull/1" target="_blank" rel="noopener noreferrer">this example</a> if using 2.x client.</p>
<ul>
<li>You can use other metrics emitter like <a href="https://github.com/uber-java/tally/tree/master/m3" target="_blank" rel="noopener noreferrer">M3</a></li>
<li>Alternatively, you can implement the tally <a href="https://github.com/uber-java/tally/blob/master/core/src/main/java/com/uber/m3/tally/Scope.java" target="_blank" rel="noopener noreferrer">Reporter interface</a></li>
</ul>
</li>
<li>
<p>For running Cadence services in production, please follow this <a href="https://github.com/banzaicloud/banzai-charts/blob/master/cadence/templates/server-service-monitor.yaml" target="_blank" rel="noopener noreferrer">example of hemlchart</a> to emit server side metrics. Or you can follow <a href="https://github.com/cadence-workflow/cadence/blob/master/config/development_prometheus.yaml#L40" target="_blank" rel="noopener noreferrer">the example of local environment</a> to Prometheus. All services need to expose a HTTP port to provide metircs like below</p>
</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">timerType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;histogram&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">listenAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.0.0.0:8001&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The rest of the instruction uses local environment as an example.</p>
<p>For testing local server emitting metrics to Promethues, the easiest way is to use <a href="https://github.com/cadence-workflow/cadence/blob/master/docker/" target="_blank" rel="noopener noreferrer">docker-compose</a> to start a local Cadence instance.</p>
<p>Make sure to update the <code>prometheus_config.yml</code> to add &quot;host.docker.internal:9098&quot; to the scrape list before starting the docker-compose:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scrape_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">external_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">monitor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cadence-monitor&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">job_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;prometheus&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">static_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># addresses to scrape</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cadence:9090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cadence:8000&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cadence:8001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cadence:8002&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cadence:8003&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;host.docker.internal:9098&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: <code>host.docker.internal</code> <a href="https://docs.docker.com/docker-for-mac/networking/#use-cases-and-workarounds" target="_blank" rel="noopener noreferrer">may not work for some docker versions</a></p>
<ul>
<li>
<p>After updating the prometheus_config.yaml as above, run <code>docker-compose up</code> to start the local Cadence instance</p>
</li>
<li>
<p>Go the the sample repo, build the helloworld sample <code>make helloworld</code> and run the worker <code>./bin/helloworld -m worker</code>, and then in another Shell start a workflow <code>./bin/helloworld</code></p>
</li>
<li>
<p>Go to your <a href="http://localhost:9090/" target="_blank" rel="noopener noreferrer">local Prometheus dashboard</a>, you should be able to check the metrics emitted by handler from client/frontend/matching/history/sysWorker and confirm your services are healthy through <a href="http://localhost:9090/targets" target="_blank" rel="noopener noreferrer">targets</a></p>
</li>
</ul>
<img width="1192" alt="Screen Shot 2021-02-20 at 11 31 11 AM" src="https://user-images.githubusercontent.com/4523955/108606555-8d0dfb80-736f-11eb-968d-7678df37455c.png">
<ul>
<li>Go to <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">local Grafana</a> , login as <code>admin/admin</code>.</li>
<li>Configure Prometheus as datasource: use <code>http://host.docker.internal:9090</code> as URL of prometheus.</li>
<li>Import the <a href="/Cadence-Docs/docs/operation-guide/monitoring#grafanaprometheus-dashboard-templates">Grafana dashboard tempalte</a> as JSON files.</li>
</ul>
<p>Client side dashboard looks like this:</p>
<img width="1513" alt="Screen Shot 2021-02-20 at 12 32 23 PM" src="https://user-images.githubusercontent.com/4523955/108607838-b7fc4d80-7377-11eb-8fd9-edc0e58afaad.png">
<p>And server basic dashboard:</p>
<img width="1514" alt="Screen Shot 2021-02-20 at 12 31 54 PM" src="https://user-images.githubusercontent.com/4523955/108607843-baf73e00-7377-11eb-9759-e67a1a00f442.png">
<img width="1519" alt="Screen Shot 2021-02-20 at 11 06 54 AM" src="https://user-images.githubusercontent.com/4523955/108606577-b169d800-736f-11eb-8fcb-88801f23b656.png">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="datadog-dashboard-templates">DataDog dashboard templates<a href="#datadog-dashboard-templates" class="hash-link" aria-label="Direct link to DataDog dashboard templates" title="Direct link to DataDog dashboard templates">​</a></h2>
<p>This <a href="https://github.com/cadence-workflow/Cadence-Docs/tree/master/src/datadog" target="_blank" rel="noopener noreferrer">package</a> contains examples of Cadence dashboards with DataDog.</p>
<ul>
<li>
<p><code>Cadence-Client</code> is the dashboard that includes all the metrics to help you understand Cadence client behavior. Most of these metrics are emitted by the client SDKs, with a few exceptions from server side (for example, workflow timeout).</p>
</li>
<li>
<p><code>Cadence-Server</code> is the the server dashboard that you can use to monitor and undertand the health and status of your Cadence cluster.</p>
</li>
</ul>
<p>To use DataDog with Cadence, follow <a href="https://docs.datadoghq.com/integrations/guide/prometheus-metrics/" target="_blank" rel="noopener noreferrer">this instruction</a> to collect Prometheus metrics using DataDog agent.</p>
<p>NOTE1: don&#x27;t forget to adjust <code>max_returned_metrics</code> to a higher number(e.g. 100000). Otherwise DataDog agent won&#x27;t be able to <a href="https://docs.datadoghq.com/integrations/guide/prometheus-host-collection/" target="_blank" rel="noopener noreferrer">collect all metrics(default is 2000)</a>.</p>
<p>NOTE2: the template contains templating variables <code>$App</code> and <code>$Availability_Zone</code>. Feel free to remove them if you don&#x27;t have them in your setup.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="grafanaprometheus-dashboard-templates">Grafana+Prometheus dashboard templates<a href="#grafanaprometheus-dashboard-templates" class="hash-link" aria-label="Direct link to Grafana+Prometheus dashboard templates" title="Direct link to Grafana+Prometheus dashboard templates">​</a></h2>
<p>This <a href="https://github.com/cadence-workflow/Cadence-Docs/tree/master/src/grafana/prometheus" target="_blank" rel="noopener noreferrer">package</a> contains examples of Cadence dashboards with Prometheus.</p>
<ul>
<li>
<p><code>Cadence-Client</code> is the dashboard of client metrics, and a few server side metrics that belong to client side but have to be emitted by server(for example, workflow timeout).</p>
</li>
<li>
<p><code>Cadence-Server-Basic</code> is the the basic server dashboard to monitor/navigate the health/status of a Cadence cluster.</p>
</li>
<li>
<p>Apart from the basic server dashboard, it&#x27;s recommended to set up dashboards on different components for Cadence server: Frontend, History, Matching, Worker, Persistence, Archival, etc. Any <a href="https://github.com/cadence-workflow/Cadence-Docs" target="_blank" rel="noopener noreferrer">contribution</a> is always welcome to enrich the existing templates or new templates!</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="periodic-testscanary-for-health-check">Periodic tests(Canary) for health check<a href="#periodic-testscanary-for-health-check" class="hash-link" aria-label="Direct link to Periodic tests(Canary) for health check" title="Direct link to Periodic tests(Canary) for health check">​</a></h2>
<p>It&#x27;s recommended that you run periodical test to get signals on the healthness of your cluster. Please following instructions in <a href="https://github.com/cadence-workflow/cadence/tree/master/canary" target="_blank" rel="noopener noreferrer">our canary package</a> to set these tests up.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadence-frontend-monitoring">Cadence Frontend Monitoring<a href="#cadence-frontend-monitoring" class="hash-link" aria-label="Direct link to Cadence Frontend Monitoring" title="Direct link to Cadence Frontend Monitoring">​</a></h2>
<p>This section describes recommended dashboards for monitoring Cadence services in your cluster. The structure mostly follows the DataDog dashboard template listed above.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-availabilityserver-metrics">Service Availability(server metrics)<a href="#service-availabilityserver-metrics" class="hash-link" aria-label="Direct link to Service Availability(server metrics)" title="Direct link to Service Availability(server metrics)">​</a></h3>
<ul>
<li>Meaning: the availability of Cadence server using server metrics.</li>
<li>Suggested monitor: below 95% &gt; 5 min then alert, below 99% for &gt; 5 min triggers a warning</li>
<li>Monitor action: When fired, check if there is any persistence errors.  If so then check the healthness of the database(may need to restart or scale up). If not then check the error logs.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="startworkflow-per-second">StartWorkflow Per Second<a href="#startworkflow-per-second" class="hash-link" aria-label="Direct link to StartWorkflow Per Second" title="Direct link to StartWorkflow Per Second">​</a></h3>
<ul>
<li>Meaning: how many workflows are started per second. This helps determine if your server is overloaded.</li>
<li>Suggested monitor: This is a business metrics. No monitoring required.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">operation </span><span class="token keyword" style="color:#00009f">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">startworkflowexecution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">signalwithstartworkflowexecution</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activities-started-per-second">Activities Started Per Second<a href="#activities-started-per-second" class="hash-link" aria-label="Direct link to Activities Started Per Second" title="Direct link to Activities Started Per Second">​</a></h3>
<ul>
<li>Meaning: How many activities are started per second. Helps determine if the server is overloaded.</li>
<li>Suggested monitor: This is a business metrics. No monitoring required.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">pollforactivitytask</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="decisions-started-per-second">Decisions Started Per Second<a href="#decisions-started-per-second" class="hash-link" aria-label="Direct link to Decisions Started Per Second" title="Direct link to Decisions Started Per Second">​</a></h3>
<ul>
<li>Meaning: How many workflow decisions are started per second. Helps determine if the server is overloaded.</li>
<li>Suggested monitor: This is a business metrics. No monitoring required.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">pollfordecisiontask</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="periodical-test-suite-successaka-canary">Periodical Test Suite Success(aka Canary)<a href="#periodical-test-suite-successaka-canary" class="hash-link" aria-label="Direct link to Periodical Test Suite Success(aka Canary)" title="Direct link to Periodical Test Suite Success(aka Canary)">​</a></h3>
<ul>
<li>Meaning: The success counter of canary test suite</li>
<li>Suggested monitor: Monitor needed. If fired, look at the failed canary test case and investigate the reason of failure.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workflow_success</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">workflowtype</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">workflow_sanity</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-all-api-per-second">Frontend all API per second<a href="#frontend-all-api-per-second" class="hash-link" aria-label="Direct link to Frontend all API per second" title="Direct link to Frontend all API per second">​</a></h3>
<ul>
<li>Meaning: all API on frontend per second. Information only.</li>
<li>Suggested monitor: This is a business metrics. No monitoring required.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-api-per-second-breakdown-per-operation">Frontend API per second (breakdown per operation)<a href="#frontend-api-per-second-breakdown-per-operation" class="hash-link" aria-label="Direct link to Frontend API per second (breakdown per operation)" title="Direct link to Frontend API per second (breakdown per operation)">​</a></h3>
<ul>
<li>Meaning: API on frontend per second. Information only.</li>
<li>Suggested monitor: This is a business metrics. No monitoring required.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-api-errors-per-secondbreakdown-per-operation">Frontend API errors per second(breakdown per operation)<a href="#frontend-api-errors-per-secondbreakdown-per-operation" class="hash-link" aria-label="Direct link to Frontend API errors per second(breakdown per operation)" title="Direct link to Frontend API errors per second(breakdown per operation)">​</a></h3>
<ul>
<li>Meaning: API error on frontend per second. Information only.</li>
<li>Suggested monitor: This is to facilitate investigation. No monitoring required.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_bad_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_not_active</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_service_busy</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_entity_not_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_workflow_execution_already_completed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_execution_already_started</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_already_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_cancellation_already_requested</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_query_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_limit_exceeded</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_context_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_retry_task</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_bad_binary</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_client_version_not_supported</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_incomplete_history</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_nondeterministic</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_unauthorized</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_authorize_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_remote_syncmatch_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_name_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_identity_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_workflow_id_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_signal_name_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_workflow_type_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_request_id_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_task_list_name_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_activity_id_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_activity_type_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_marker_name_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_timer_id_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>cadence_errors</code> is internal service errors.</li>
<li>any <code>cadence_errors_*</code> is client side error</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-regular-api-latency">Frontend Regular API Latency<a href="#frontend-regular-api-latency" class="hash-link" aria-label="Direct link to Frontend Regular API Latency" title="Direct link to Frontend Regular API Latency">​</a></h3>
<ul>
<li>Meaning: The latency of regular core API -- excluding long-poll/queryWorkflow/getHistory/ListWorkflow/CountWorkflow API.</li>
<li>Suggested monitor: 95% of all apis and of all operations that take over 1.5 seconds triggers a warning,  over 2 seconds triggers an alert</li>
<li>Monitor action: If fired, investigate the database read/write latency. May need to throttle some spiky traffic from certain domains, or scale up the database</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">operation </span><span class="token keyword" style="color:#00009f">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pollfordecisiontask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">pollforactivitytask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">getworkflowexecutionhistory</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">queryworkflow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">listworkflowexecutions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">listclosedworkflowexecutions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">listopenworkflowexecutions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AND</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-listworkflow-api-latency">Frontend ListWorkflow API Latency<a href="#frontend-listworkflow-api-latency" class="hash-link" aria-label="Direct link to Frontend ListWorkflow API Latency" title="Direct link to Frontend ListWorkflow API Latency">​</a></h3>
<ul>
<li>Meaning: The latency of ListWorkflow API.</li>
<li>Monitor: 95% of all apis and of all operations that take over 2 seconds triggers a warning,  over 3 seconds triggers an alert</li>
<li>Monitor action: If fired, investigate the ElasticSearch read latency. May need to throttle some spiky traffic from certain domains, or scale up ElasticSearch cluster.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">operation </span><span class="token keyword" style="color:#00009f">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">listclosedworkflowexecutions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">listopenworkflowexecutions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">listworkflowexecutions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">countworkflowexecutions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AND</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-long-poll-api-latency">Frontend Long Poll API Latency<a href="#frontend-long-poll-api-latency" class="hash-link" aria-label="Direct link to Frontend Long Poll API Latency" title="Direct link to Frontend Long Poll API Latency">​</a></h3>
<ul>
<li>Meaning: Long poll means that the worker is waiting for a task. The latency is an Indicator for how busy the worker is. Poll for activity task and poll for decision task are the types of long poll requests.The api call times out at 50 seconds if no task can be picked up.A very low latency could mean that more workers need to be added.</li>
<li>Suggested monitor: No monitor needed as long latency is expected.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">pollforactivitytask</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">pollfordecisiontask</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-get-historyquery-workflow-api-latency">Frontend Get History/Query Workflow API Latency<a href="#frontend-get-historyquery-workflow-api-latency" class="hash-link" aria-label="Direct link to Frontend Get History/Query Workflow API Latency" title="Direct link to Frontend Get History/Query Workflow API Latency">​</a></h3>
<ul>
<li>Meaning: GetHistory API acts like a long poll api, but there’s no explicit timeout. Long-poll of GetHistory is being used when WorkflowClient is waiting for the result of the workflow(essentially, WorkflowExecutionCompletedEvent).
This latency depends on the time it takes for the workflow to complete. QueryWorkflow API latency is also unpredictable as it depends on the availability and performance of workflow workers, which are owned by the application and workflow implementation(may require replaying history).</li>
<li>Suggested monitor: No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">operation </span><span class="token keyword" style="color:#00009f">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">getworkflowexecutionhistory</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">queryworkflow</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AND</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-workflowclient-api-per-seconds-by-domain">Frontend WorkflowClient API per seconds by domain<a href="#frontend-workflowclient-api-per-seconds-by-domain" class="hash-link" aria-label="Direct link to Frontend WorkflowClient API per seconds by domain" title="Direct link to Frontend WorkflowClient API per seconds by domain">​</a></h3>
<ul>
<li>Meaning: Shows which domains are making the most requests using WorkflowClient(excluding worker API like PollForDecisionTask and RespondDecisionTaskCompleted). Used for troubleshooting.
In the future it can be used to set some rate limiting per domain.</li>
<li>Suggested monitor: No monitor needed.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">operation </span><span class="token keyword" style="color:#00009f">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">signalwithstartworkflowexecution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">signalworkflowexecution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">startworkflowexecution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">terminateworkflowexecution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">resetworkflowexecution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">requestcancelworkflowexecution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">listworkflowexecutions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadence-application-monitoring">Cadence Application Monitoring<a href="#cadence-application-monitoring" class="hash-link" aria-label="Direct link to Cadence Application Monitoring" title="Direct link to Cadence Application Monitoring">​</a></h2>
<p>This section describes the recommended dashboards for monitoring Cadence application using metrics emitted by SDK. See the <code>setup</code> section about how to collect those metrics.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-start-and-successful-completion">Workflow Start and Successful completion<a href="#workflow-start-and-successful-completion" class="hash-link" aria-label="Direct link to Workflow Start and Successful completion" title="Direct link to Workflow Start and Successful completion">​</a></h3>
<ul>
<li>Workflow successfully started/signalWithStart and completed/canceled/continuedAsNew</li>
<li>Monitor: not recommended</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_workflow_start</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_workflow_completed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_workflow_canceled</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_workflow_continue_as_new</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_workflow_signal_with_start</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-failure">Workflow Failure<a href="#workflow-failure" class="hash-link" aria-label="Direct link to Workflow Failure" title="Direct link to Workflow Failure">​</a></h3>
<ul>
<li>Metrics for all types of failures, including workflow failures(throw uncaught exceptions), workflow timeout and termination.</li>
<li>For timeout and termination, workflow worker doesn’t have a chance to emit metrics when it’s terminate, so the metric comes from the history service</li>
<li>Monitor: application should set monitor on timeout and failure to make sure workflow are not failing. Cancel/terminate are usually triggered by human intentionally.</li>
<li>When the metrics fire, go to Cadence UI to find the failed workflows and investigate the workflow history to understand the type of failure</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_workflow_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workflow_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workflow_terminate</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workflow_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="decision-poll-counters">Decision Poll Counters<a href="#decision-poll-counters" class="hash-link" aria-label="Direct link to Decision Poll Counters" title="Direct link to Decision Poll Counters">​</a></h3>
<ul>
<li>Indicates if the workflow worker is available and is polling tasks. If the worker is not available no counters will show.
Can also check if the worker is using the right task list.
“No task” poll type means that the worker exists and is idle.
The timeout for this long poll api is 50 seconds. If no task is received within 50 seconds, then an empty response will be returned and another long poll request will be sent.</li>
<li>Monitor: application can should monitor on it to make sure workers are available</li>
<li>When fires, investigate the worker deployment to see why they are not available, also check if they are using the right domain/tasklist</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_decision_poll_total</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_decision_poll_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_decision_poll_no_task</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_decision_poll_succeed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="decisiontasks-scheduled-per-second">DecisionTasks Scheduled per second<a href="#decisiontasks-scheduled-per-second" class="hash-link" aria-label="Direct link to DecisionTasks Scheduled per second" title="Direct link to DecisionTasks Scheduled per second">​</a></h3>
<ul>
<li>Indicate how many decision tasks are scheduled</li>
<li>Monitor: not recommended -- Information only to know whether or not a tasklist is overloaded</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">adddecisiontask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="decision-scheduled-to-start-latency">Decision Scheduled To Start Latency<a href="#decision-scheduled-to-start-latency" class="hash-link" aria-label="Direct link to Decision Scheduled To Start Latency" title="Direct link to Decision Scheduled To Start Latency">​</a></h3>
<ul>
<li>If this latency is too high then either:
The worker is not available or too busy after the task has been scheduled.
The task list is overloaded(confirmed by DecisionTaskScheduled per second widget). By default a task list only has one partition and a partition can only be owned by one host and so the throughput of a task list is limited. More task lists can be added to scale or a scalable task list can be used to add more partitions.</li>
<li>Monitor: application can set monitor on it to make sure latency is tolerable</li>
<li>When fired, check if worker capacity is enough, then check if tasklist is overloaded. If needed, contact the Cadence cluster Admin to enable scalable tasklist to add more partitions to the tasklist</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_decision_scheduled_to_start_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">avg</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_decision_scheduled_to_start_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_decision_scheduled_to_start_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">95percentile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="decision-execution-failure">Decision Execution Failure<a href="#decision-execution-failure" class="hash-link" aria-label="Direct link to Decision Execution Failure" title="Direct link to Decision Execution Failure">​</a></h3>
<ul>
<li>This means some critical bugs in workflow code causing decision task execution failure</li>
<li>Monitor: application should set monitor on it to make sure no consistent failure</li>
<li>When fired, you may need to terminate the problematic workflows to mitigate the issue. After you identify the bugs, you can fix the code and then reset the workflow to recover</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_decision_execution_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="decision-execution-timeout">Decision Execution Timeout<a href="#decision-execution-timeout" class="hash-link" aria-label="Direct link to Decision Execution Timeout" title="Direct link to Decision Execution Timeout">​</a></h3>
<ul>
<li>This means some critical bugs in workflow code causing decision task execution timeout</li>
<li>Monitor: application should set monitor on it to make sure no consistent timeout</li>
<li>When fired, you may need to terminate the problematic workflows to mitigate the issue. After you identify the bugs, you can fix the code and then reset the workflow to recover</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start_to_close_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">timeractivetaskdecision</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-end-to-end-latency">Workflow End to End Latency<a href="#workflow-end-to-end-latency" class="hash-link" aria-label="Direct link to Workflow End to End Latency" title="Direct link to Workflow End to End Latency">​</a></h3>
<ul>
<li>This is for the client application to track their SLOs
For example, if you expect a workflow to take duration d to complete, you can use this latency to set a monitor.</li>
<li>Monitor: application can monitor this metrics if expecting workflow to complete within a certain duration.</li>
<li>When fired, investigate the workflow history to see the workflow takes longer than expected to complete</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_workflow_endtoend_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">median</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_workflow_endtoend_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">95percentile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$WorkflowType</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">workflowtype</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-panic-and-nondeterministicerror">Workflow Panic and NonDeterministicError<a href="#workflow-panic-and-nondeterministicerror" class="hash-link" aria-label="Direct link to Workflow Panic and NonDeterministicError" title="Direct link to Workflow Panic and NonDeterministicError">​</a></h3>
<ul>
<li>These errors mean that there is a bug in the code and the deploy should be rolled back.</li>
<li>A monitor should be set on this metric</li>
<li>When fired, you may rollback the deployment to mitigate your issue. Usually this caused by bad (non-backward compatible) code change. After rollback, look at your worker error logs to see where the bug is.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_worker_panic</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_non_deterministic_error</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-sticky-cache-hit-rate-and-miss-count">Workflow Sticky Cache Hit Rate and Miss Count<a href="#workflow-sticky-cache-hit-rate-and-miss-count" class="hash-link" aria-label="Direct link to Workflow Sticky Cache Hit Rate and Miss Count" title="Direct link to Workflow Sticky Cache Hit Rate and Miss Count">​</a></h3>
<ul>
<li>This metric can be used for performance optimization.
This can be improved by adding more worker instances, or adjust the workerOption(GoSDK) or WorkferFactoryOption(Java SDK).
CacheHitRate too low means workers will have to replay history to rebuild the workflow stack when executing a decision task. Depending on the the history size<!-- -->
<ul>
<li>If less than 1MB, then it’s okay to be lower than 50%</li>
<li>If greater than 1MB, then it’s okay to be greater than 50%</li>
<li>If greater than 5MB, , then it’s okay to be greater than 60%</li>
<li>If greater than 10MB , then it’s okay to be greater than 70%</li>
<li>If greater than 20MB , then it’s okay to be greater than 80%</li>
<li>If greater than 30MB , then it’s okay to be greater than 90%</li>
<li>Workflow history size should never be greater than 50MB.</li>
</ul>
</li>
<li>A monitor can be set on this metric, if performance is important.</li>
<li>When fired, adjust the stickyCacheSize in the WorkerFactoryOption, or add more workers</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_sticky_cache_miss</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_sticky_cache_hit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activity-task-operations">Activity Task Operations<a href="#activity-task-operations" class="hash-link" aria-label="Direct link to Activity Task Operations" title="Direct link to Activity Task Operations">​</a></h3>
<ul>
<li>Activity started/completed counters</li>
<li>Monitor: not recommended</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_task_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_task_completed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_task_timeouted</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-activity-task-operations">Local Activity Task Operations<a href="#local-activity-task-operations" class="hash-link" aria-label="Direct link to Local Activity Task Operations" title="Direct link to Local Activity Task Operations">​</a></h3>
<ul>
<li>Local Activity execution counters</li>
<li>Monitor: not recommended</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_local_activity_total</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activity-execution-latency">Activity Execution Latency<a href="#activity-execution-latency" class="hash-link" aria-label="Direct link to Activity Execution Latency" title="Direct link to Activity Execution Latency">​</a></h3>
<ul>
<li>If it’s expected that an activity will take x amount of time to complete, a monitor on this metric could be helpful to enforce that expectation.</li>
<li>Monitor: application can set monitor on it if expecting workflow start/complete activities with certain latency</li>
<li>When fired, investigate the activity code and its dependencies</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_execution_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">avg</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_execution_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activity-poll-counters">Activity Poll Counters<a href="#activity-poll-counters" class="hash-link" aria-label="Direct link to Activity Poll Counters" title="Direct link to Activity Poll Counters">​</a></h3>
<ul>
<li>Indicates the activity worker is available and is polling tasks. If the worker is not available no counters will show.
Can also check if the worker is using the right task list.
“No task” poll type means that the worker exists and is idle.
The timeout for this long poll api is 50 seconds. If within that 50 seconds, no task is received then an empty response will be returned and another long poll request will be sent.</li>
<li>Monitor: application can set monitor on it to make sure activity workers are available</li>
<li>When fires, investigate the worker deployment to see why they are not available, also check if they are using the right domain/tasklist</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_poll_total</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_poll_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_poll_succeed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_poll_no_task</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activitytasks-scheduled-per-second">ActivityTasks Scheduled per second<a href="#activitytasks-scheduled-per-second" class="hash-link" aria-label="Direct link to ActivityTasks Scheduled per second" title="Direct link to ActivityTasks Scheduled per second">​</a></h3>
<ul>
<li>Indicate how many activities tasks are scheduled</li>
<li>Monitor: not recommended -- Information only to know whether or not a tasklist is overloaded</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">addactivitytask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activity-scheduled-to-start-latency">Activity Scheduled To Start Latency<a href="#activity-scheduled-to-start-latency" class="hash-link" aria-label="Direct link to Activity Scheduled To Start Latency" title="Direct link to Activity Scheduled To Start Latency">​</a></h3>
<ul>
<li>If the latency is too high either:
The worker is not available or too busy
There are too many activities scheduled into the same tasklist and the tasklist is not scalable. Same as Decision Scheduled To Start Latency</li>
<li>Monitor: application Should set monitor on it</li>
<li>When fired, check if workers are enough, then check if the tasklist is overloaded. If needed, contact the Cadence cluster Admin to enable scalable tasklist to add more partitions to the tasklist</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_scheduled_to_start_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">avg</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_scheduled_to_start_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_scheduled_to_start_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">95percentile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">activitytype</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activity-failure">Activity Failure<a href="#activity-failure" class="hash-link" aria-label="Direct link to Activity Failure" title="Direct link to Activity Failure">​</a></h3>
<ul>
<li>A monitor on this metric will alert the team that activities are failing
The activity timeout metrics are emitted by the history service, because a timeout causes a hard stop and the client doesn’t have time to emit metrics.</li>
<li>Monitor: application can set monitor on it</li>
<li>When fired, investigate the activity code and its dependencies</li>
<li><code>cadence_activity_execution_failed</code> vs <code>cadence_activity_task_failed</code>:
Only have different when using RetryPolicy
cadence_activity_task_failed counter increase per activity attempt
cadence_activity_execution_failed counter increase when activity fails after all attempts</li>
<li>should only monitor on cadence_activity_execution_failed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_execution_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_task_panic</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_task_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_activity_task_canceled</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">heartbeat_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schedule_to_start_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start_to_close_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schedule_to_close_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token entity" style="color:#36acaa">env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-api-success-rate">Service API success rate<a href="#service-api-success-rate" class="hash-link" aria-label="Direct link to Service API success rate" title="Direct link to Service API success rate">​</a></h3>
<ul>
<li>The client’s experience of the service availability. It encompasses many apis. Things that could affect the service’s API success rate are:<!-- -->
<ul>
<li>Service availability</li>
<li>The network could have issues.</li>
<li>A required api is not available.</li>
<li>Client side errors like EntityNotExists, WorkflowAlreadyStarted etc. This means that application code has potential bugs of calling Cadence service.</li>
</ul>
</li>
<li>Monitor: application can set monitor on it</li>
<li>When fired, check application logs to see if the error is Cadence server error or client side error. Error like EntityNotExists/ExecutionAlreadyStarted/QueryWorkflowFailed/etc are client side error, meaning that the application is misusing the APIs. If most errors are server side errors(internalServiceError), you can contact Cadence admin.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_error</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-api-latency">Service API Latency<a href="#service-api-latency" class="hash-link" aria-label="Direct link to Service API Latency" title="Direct link to Service API Latency">​</a></h3>
<ul>
<li>The latency of the API, excluding long poll APIs.</li>
<li>Application can set monitor on certain APIs, if necessary.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">95percentile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">cadence_metric_scope</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pollforactivitytask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">cadence_metric_scope</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pollfordecisiontask</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cadence_metric_scope</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-api-breakdown">Service API Breakdown<a href="#service-api-breakdown" class="hash-link" aria-label="Direct link to Service API Breakdown" title="Direct link to Service API Breakdown">​</a></h3>
<ul>
<li>A counter breakdown by API to help investigate availability</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">cadence_metric_scope</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pollforactivitytask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">cadence_metric_scope</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pollfordecisiontask</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cadence_metric_scope</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-api-error-breakdown">Service API Error Breakdown<a href="#service-api-error-breakdown" class="hash-link" aria-label="Direct link to Service API Error Breakdown" title="Direct link to Service API Error Breakdown">​</a></h3>
<ul>
<li>A counter breakdown by API error to help investigate availability</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_error</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cadence_metric_scope</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="max-event-blob-size">Max Event Blob size<a href="#max-event-blob-size" class="hash-link" aria-label="Direct link to Max Event Blob size" title="Direct link to Max Event Blob size">​</a></h3>
<ul>
<li>By default the max size is 2 MB. If the input is greater than the max size the server will reject the request.
The size of a single history event. This applies to any event input, like start workflow event, start activity event, or signal event.
It should never be greater than 2MB.</li>
<li>A monitor should be set on this metric.</li>
<li>When fired, please review the design/code ASAP to reduce the blob size. Reducing the input/output of workflow/activity/signal will help.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​​</span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">event_blob_size</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="max-history-size">Max History Size<a href="#max-history-size" class="hash-link" aria-label="Direct link to Max History Size" title="Direct link to Max History Size">​</a></h3>
<ul>
<li>Workflow history cannot grow indefinitely. It will cause replay issues.
If the workflow exceeds the history’s max size the workflow will be terminate automatically. The max size by default is 200 megabytes.
As a suggestion for workflow design, workflow history should never grow greater than 50MB. Use continueAsNew to break long workflows into multiple runs.</li>
<li>A monitor should be set on this metric.</li>
<li>When fired, please review the design/code ASAP to reduce the history size. Reducing the input/output of workflow/activity/signal will help. Also you may need to use ContinueAsNew to break a single execution into smaller pieces.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​​</span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">history_size</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="max-history-length">Max History Length<a href="#max-history-length" class="hash-link" aria-label="Direct link to Max History Length" title="Direct link to Max History Length">​</a></h3>
<ul>
<li>The number of events of workflow history.
It should never be greater than 50K(workflow exceeding 200K events will be terminated by server). Use continueAsNew to break long workflows into multiple runs.</li>
<li>A monitor should be set on this metric.</li>
<li>When fired, please review the design/code ASAP to reduce the history length. You may need to use ContinueAsNew to break a single execution into smaller pieces.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">​​</span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">history_count</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa">$Domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadence-history-service-monitoring">Cadence History Service Monitoring<a href="#cadence-history-service-monitoring" class="hash-link" aria-label="Direct link to Cadence History Service Monitoring" title="Direct link to Cadence History Service Monitoring">​</a></h2>
<p>History is the most critical/core service for cadence which implements the workflow logic.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="history-shard-movements">History shard movements<a href="#history-shard-movements" class="hash-link" aria-label="Direct link to History shard movements" title="Direct link to History shard movements">​</a></h3>
<ul>
<li>Should only happen during deployment or when the node restarts.
If there’s shard movement without deployments then that’s unexpected and there’s probably a performance issue. The shard ownership is assigned by a particular history host, so if the shard is moving it’ll be hard for the frontend service to route a request to a particular history shard and to find it.</li>
<li>A monitor can be set to be alerted on shard movements without deployment.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">membership_changed_count</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">shardcontroller</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shard_closed_count</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">shardcontroller</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sharditem_created_count</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">shardcontroller</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sharditem_removed_count</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">shardcontroller</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-tasks-per-second">Transfer Tasks Per Second<a href="#transfer-tasks-per-second" class="hash-link" aria-label="Direct link to Transfer Tasks Per Second" title="Direct link to Transfer Tasks Per Second">​</a></h3>
<ul>
<li>TransferTask is an internal background task that moves workflow state and transfers an action task from the history engine to another service(e.g. Matching service, ElasticSearch, etc)</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">transferactivetask</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="timer-tasks-per-second">Timer Tasks Per Second<a href="#timer-tasks-per-second" class="hash-link" aria-label="Direct link to Timer Tasks Per Second" title="Direct link to Timer Tasks Per Second">​</a></h3>
<ul>
<li>Timer tasks are tasks that are scheduled to be triggered at a given time in future. For example, workflow.sleep() will wait an x amount of time then the task will be pushed somewhere for a worker to pick up.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">timeractivetask</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-tasks-per-domain">Transfer Tasks Per Domain<a href="#transfer-tasks-per-domain" class="hash-link" aria-label="Direct link to Transfer Tasks Per Domain" title="Direct link to Transfer Tasks Per Domain">​</a></h3>
<ul>
<li>Count breakdown by domain</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_requests_per_domain</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">transferactive</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="timer-tasks-per-domain">Timer Tasks Per Domain<a href="#timer-tasks-per-domain" class="hash-link" aria-label="Direct link to Timer Tasks Per Domain" title="Direct link to Timer Tasks Per Domain">​</a></h3>
<ul>
<li>Count breakdown by domain</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_requests_per_domain</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">timeractive</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-latency-by-type">Transfer Latency by Type<a href="#transfer-latency-by-type" class="hash-link" aria-label="Direct link to Transfer Latency by Type" title="Direct link to Transfer Latency by Type">​</a></h3>
<ul>
<li>If latency is too high then it’s an issue for a workflow. For example, if transfer task latency is 5 second, then it takes 5 second for activity/decision to actual receive the task.</li>
<li>Monitor should be set on diffeernt types of latency. Note that <code>queue_latency</code> can go very high during deployment and it&#x27;s expected. See below NOTE for explanation.</li>
<li>When fired, check if it’s due to some persistence issue.
If so then investigate the database(may need to scale up)
If not then see if need to scale up Cadence deployment(K8s instance)</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">transfer</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_latency_processing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">transfer</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_latency_queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">transfer</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="timer-task-latency-by-type">Timer Task Latency by type<a href="#timer-task-latency-by-type" class="hash-link" aria-label="Direct link to Timer Task Latency by type" title="Direct link to Timer Task Latency by type">​</a></h3>
<ul>
<li>If latency is too high then it’s an issue for a workflow. For example, if you set the workflow.sleep() for 10 seconds and the timer latency is 5 secs then the workflow will sleep for 15 seconds.</li>
<li>Monitor should be set on diffeernt types of latency.</li>
<li>When fired, check if it’s due to some persistence issue.
If so then investigate the database(may need to scale up) [Mostly]
If not then see if need to scale up Cadence deployment(K8s instance)</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">timer</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_latency_processing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">timer</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task_latency_queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">timer</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="note-task-queue-latency-vs-executing-latency-vs-processing-latency-in-transfer--timer-task-latency-metrics">NOTE: Task Queue Latency vs Executing Latency vs Processing Latency In Transfer &amp; Timer Task Latency Metrics<a href="#note-task-queue-latency-vs-executing-latency-vs-processing-latency-in-transfer--timer-task-latency-metrics" class="hash-link" aria-label="Direct link to NOTE: Task Queue Latency vs Executing Latency vs Processing Latency In Transfer &amp; Timer Task Latency Metrics" title="Direct link to NOTE: Task Queue Latency vs Executing Latency vs Processing Latency In Transfer &amp; Timer Task Latency Metrics">​</a></h3>
<ul>
<li><code>task_latency_queue</code>: “Queue Latency” is “end to end” latency for users. The latency could go to several minutes during deployment because of metrics being re-emitted (but the actual latency is not that high)</li>
<li><code>task_latency</code>: “Executing latency” is the time from submission to executing pool to completion. It includes scheduling, retry and processing time of the task.</li>
<li><code>task_latency_processing</code>: “Processing latency” is the processing time of the task of a single attempt(without retry)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-task-latency-per-domain">Transfer Task Latency Per Domain<a href="#transfer-task-latency-per-domain" class="hash-link" aria-label="Direct link to Transfer Task Latency Per Domain" title="Direct link to Transfer Task Latency Per Domain">​</a></h3>
<ul>
<li>Latency breakdown by domain</li>
<li>No monitor needed.</li>
<li>Datadog query example: modify above queries to use domain tag.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="timer-task-latency-per-domain">Timer Task Latency Per Domain<a href="#timer-task-latency-per-domain" class="hash-link" aria-label="Direct link to Timer Task Latency Per Domain" title="Direct link to Timer Task Latency Per Domain">​</a></h3>
<ul>
<li>Latency breakdown by domain</li>
<li>No monitor needed.</li>
<li>Datadog query example: modify above queries to use domain tag.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="history-api-per-second">History API per Second<a href="#history-api-per-second" class="hash-link" aria-label="Direct link to History API per Second" title="Direct link to History API per Second">​</a></h3>
<p>Information about history API
Datadog query example</p>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="history-api-errors-per-second">History API Errors per Second<a href="#history-api-errors-per-second" class="hash-link" aria-label="Direct link to History API Errors per Second" title="Direct link to History API Errors per Second">​</a></h3>
<ul>
<li>Information about history API</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_bad_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_not_active</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_service_busy</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_entity_not_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_workflow_execution_already_completed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_execution_already_started</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_already_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_cancellation_already_requested</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_query_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_limit_exceeded</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_context_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_retry_task</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_bad_binary</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_client_version_not_supported</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_incomplete_history</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_nondeterministic</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_unauthorized</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_authorize_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_remote_syncmatch_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_name_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_identity_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_workflow_id_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_signal_name_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_workflow_type_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_request_id_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_task_list_name_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_activity_id_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_activity_type_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_marker_name_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_timer_id_exceeded_warn_limit</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>cadence_errors</code> is internal service errors.</li>
<li>any <code>cadence_errors_*</code> is client side error</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="max-history-size-1">Max History Size<a href="#max-history-size-1" class="hash-link" aria-label="Direct link to Max History Size" title="Direct link to Max History Size">​</a></h3>
<p>The history size of the workflow cannot be too large otherwise it will cause performance issue during replay. The soft limit is 200MB. If exceeding workflow will be terminated by server.</p>
<ul>
<li>No monitor needed</li>
<li>Datadog query is same as the client section</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="max-history-length-1">Max History Length<a href="#max-history-length-1" class="hash-link" aria-label="Direct link to Max History Length" title="Direct link to Max History Length">​</a></h3>
<p>Similarly, the history length of the workflow cannot be too large otherwise it will cause performance issues during replay. The soft limit is 200K events. If exceeding, workflow will be terminated by server.</p>
<ul>
<li>No monitor needed</li>
<li>Datadog query is same as the client section</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="max-event-blob-size-1">Max Event Blob Size<a href="#max-event-blob-size-1" class="hash-link" aria-label="Direct link to Max Event Blob Size" title="Direct link to Max Event Blob Size">​</a></h3>
<ul>
<li>The size of each event(e.g. Decided by input/output of workflow/activity/signal/chidlWorkflow/etc) cannot be too large otherwise it will also cause performance issue. The soft limit is 2MB. If exceeding, the requests will be rejected by server, meaning that workflow won’t be able to make any progress.</li>
<li>No monitor needed</li>
<li>Datadog query is same as the client section</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadence-matching-service-monitoring">Cadence Matching Service Monitoring<a href="#cadence-matching-service-monitoring" class="hash-link" aria-label="Direct link to Cadence Matching Service Monitoring" title="Direct link to Cadence Matching Service Monitoring">​</a></h2>
<p>Matching service is to match/assign tasks from cadence service to workers. Matching got the tasks from history service. If workers are active the task will be matched immediately , It’s called “sync match”. If workers are not available, matching will persist into database and then reload the tasks when workers are back(called “async match”)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matching-apis-per-second">Matching APIs per Second<a href="#matching-apis-per-second" class="hash-link" aria-label="Direct link to Matching APIs per Second" title="Direct link to Matching APIs per Second">​</a></h3>
<ul>
<li>API processed by matching service per second</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matching-api-errors-per-second">Matching API Errors per Second<a href="#matching-api-errors-per-second" class="hash-link" aria-label="Direct link to Matching API Errors per Second" title="Direct link to Matching API Errors per Second">​</a></h3>
<ul>
<li>API errors by matching service per second</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_bad_request_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_bad_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_not_active_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_not_active</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_service_busy_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_service_busy</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_entity_not_exists_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_entity_not_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_execution_already_started_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_execution_already_started</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_already_exists_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_domain_already_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_cancellation_already_requested_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_cancellation_already_requested</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_query_failed_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_query_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_limit_exceeded_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_limit_exceeded</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_context_timeout_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_context_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_retry_task_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_retry_task</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_bad_binary_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_bad_binary</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_client_version_not_supported_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_client_version_not_supported</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_incomplete_history_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_incomplete_history</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_nondeterministic_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_nondeterministic</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_unauthorized_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_unauthorized</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_authorize_failed_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_authorize_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_remote_syncmatch_failed_per_tl</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_remote_syncmatch_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_shard_ownership_lost</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_errors_event_already_started</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>cadence_errors</code> is internal service errors.</li>
<li>any <code>cadence_errors_*</code> is client side error</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matching-regular-api-latency">Matching Regular API Latency<a href="#matching-regular-api-latency" class="hash-link" aria-label="Direct link to Matching Regular API Latency" title="Direct link to Matching Regular API Latency">​</a></h3>
<ul>
<li>Regular APIs are the APIs excluding long polls</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cadence_latency_per_tl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">pollfor</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">queryworkflow</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sync-match-latency">Sync Match Latency:<a href="#sync-match-latency" class="hash-link" aria-label="Direct link to Sync Match Latency:" title="Direct link to Sync Match Latency:">​</a></h3>
<ul>
<li>If the latency is too high, probably the tasklist is overloaded. Consider using multiple tasklist, or enable scalable tasklist feature by adding more partition to the tasklist(default is one)
To confirm if there are too many tasks being added to the tasklist, use “AddTasks per second - domain, tasklist breakdown”</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">syncmatch_latency_per_tl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-match-latency">Async match Latency<a href="#async-match-latency" class="hash-link" aria-label="Direct link to Async match Latency" title="Direct link to Async match Latency">​</a></h3>
<ul>
<li>If a match is done asynchronously it writes a match to the db to use later. Measures the time when the worker is not actively looking for tasks. If this is high, more workers are needed.</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">asyncmatch_latency_per_tl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tasklist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadence-default-persistence-monitoring">Cadence Default Persistence Monitoring<a href="#cadence-default-persistence-monitoring" class="hash-link" aria-label="Direct link to Cadence Default Persistence Monitoring" title="Direct link to Cadence Default Persistence Monitoring">​</a></h2>
<p>The following monotors should be set up for Cadence persistence.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-availability">Persistence Availability<a href="#persistence-availability" class="hash-link" aria-label="Direct link to Persistence Availability" title="Direct link to Persistence Availability">​</a></h3>
<ul>
<li>The availability of the primary database for your Cadence server</li>
<li>Monitor required: Below 95% &gt; 5min then alert, below 99% triggers a slack warning</li>
<li>When fired, check if it’s due to some persistence issue.
If so then investigate the database(may need to scale up) [Mostly]
If not then see if need to scale up Cadence deployment(K8s instance)</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> e </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> g </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-by-service-tps">Persistence By Service TPS<a href="#persistence-by-service-tps" class="hash-link" aria-label="Direct link to Persistence By Service TPS" title="Direct link to Persistence By Service TPS">​</a></h3>
<ul>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-by-operation-tps">Persistence By Operation TPS<a href="#persistence-by-operation-tps" class="hash-link" aria-label="Direct link to Persistence By Operation TPS" title="Direct link to Persistence By Operation TPS">​</a></h3>
<ul>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-by-operation-latency">Persistence By Operation Latency<a href="#persistence-by-operation-latency" class="hash-link" aria-label="Direct link to Persistence By Operation Latency" title="Direct link to Persistence By Operation Latency">​</a></h3>
<ul>
<li>Monitor required, alert if 95% of all operation latency is greater than 1 second for 5mins, warning if greater than 0.5 seconds</li>
<li>When fired, investigate the database(may need to scale up) [Mostly]
If there’s a high latency, then there could be errors or something wrong with the db</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-error-by-operation-count">Persistence Error By Operation Count<a href="#persistence-error-by-operation-count" class="hash-link" aria-label="Direct link to Persistence Error By Operation Count" title="Direct link to Persistence Error By Operation Count">​</a></h3>
<ul>
<li>It&#x27;s to help investigate availability issue</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_shard_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_shard_ownership_lost</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_condition_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_current_workflow_condition_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_busy</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_entity_not_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_execution_already_started</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_domain_already_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_bad_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_shard_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_shard_ownership_lost</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_condition_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_current_workflow_condition_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_busy</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_entity_not_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_execution_already_started</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_domain_already_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_bad_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_shard_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_shard_ownership_lost</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_condition_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_current_workflow_condition_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_busy</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_entity_not_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_execution_already_started</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_domain_already_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_matching</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_bad_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_shard_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_shard_ownership_lost</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_condition_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_current_workflow_condition_failed</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_timeout</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_busy</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_entity_not_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_execution_already_started</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_domain_already_exists</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">persistence_errors_bad_request</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>cadence_errors</code> is internal service errors.</li>
<li>any <code>cadence_errors_*</code> is client side error</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadence-advanced-visibility-persistence-monitoringif-applicable">Cadence Advanced Visibility Persistence Monitoring(if applicable)<a href="#cadence-advanced-visibility-persistence-monitoringif-applicable" class="hash-link" aria-label="Direct link to Cadence Advanced Visibility Persistence Monitoring(if applicable)" title="Direct link to Cadence Advanced Visibility Persistence Monitoring(if applicable)">​</a></h2>
<p>Kafka &amp; ElasticSearch are only for visibility. Only applicable ​​if using advanced visibility.
For writing visibility records, Cadence history service will write down the records into Kafka, and then Cadence worker service will read from Kafka and write into ElasticSearch(in batch, for performance optimization)
For reading visibility records, Frontend service will query ElasticSearch directly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-availability-1">Persistence Availability<a href="#persistence-availability-1" class="hash-link" aria-label="Direct link to Persistence Availability" title="Direct link to Persistence Availability">​</a></h3>
<ul>
<li>The availability of Cadence server using database</li>
<li>Monitor can be set</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-by-service-tps-1">Persistence By Service TPS<a href="#persistence-by-service-tps-1" class="hash-link" aria-label="Direct link to Persistence By Service TPS" title="Direct link to Persistence By Service TPS">​</a></h3>
<ul>
<li>The error of persistence API call by service</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-by-operation-tpsread-es-write-kafka">Persistence By Operation TPS(read: ES, write: Kafka)<a href="#persistence-by-operation-tpsread-es-write-kafka" class="hash-link" aria-label="Direct link to Persistence By Operation TPS(read: ES, write: Kafka)" title="Direct link to Persistence By Operation TPS(read: ES, write: Kafka)">​</a></h3>
<ul>
<li>The rate of persistence API call by API</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_rate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-by-operation-latencyin-seconds-read-es-write-kafka">Persistence By Operation Latency(in seconds) (read: ES, write: Kafka)<a href="#persistence-by-operation-latencyin-seconds-read-es-write-kafka" class="hash-link" aria-label="Direct link to Persistence By Operation Latency(in seconds) (read: ES, write: Kafka)" title="Direct link to Persistence By Operation Latency(in seconds) (read: ES, write: Kafka)">​</a></h3>
<ul>
<li>The latency of persistence API call</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-error-by-operation-count-read-es-write-kafka">Persistence Error By Operation Count (read: ES, write: Kafka)<a href="#persistence-error-by-operation-count-read-es-write-kafka" class="hash-link" aria-label="Direct link to Persistence Error By Operation Count (read: ES, write: Kafka)" title="Direct link to Persistence Error By Operation Count (read: ES, write: Kafka)">​</a></h3>
<ul>
<li>The error of persistence API call</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_history</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elasticsearch_errors</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-es-processor-counter">Kafka-&gt;ES processor counter<a href="#kafka-es-processor-counter" class="hash-link" aria-label="Direct link to Kafka-&gt;ES processor counter" title="Direct link to Kafka-&gt;ES processor counter">​</a></h3>
<ul>
<li>This is the metrics of a background processing: consuming Kafka messages and then populate to ElasticSearch in batch</li>
<li>Monitor on the running of the background processing(counter metrics is &gt; 0)</li>
<li>When fired, restart Cadence service first to mitigate. Then look at logs to see why the process is stopped(process panic/error/etc).
May consider add more pods (replicaCount) to sys-worker service for higher availability</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">es_processor_requests</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">es_processor_retries</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-es-processor-error">Kafka-&gt;ES processor error<a href="#kafka-es-processor-error" class="hash-link" aria-label="Direct link to Kafka-&gt;ES processor error" title="Direct link to Kafka-&gt;ES processor error">​</a></h3>
<ul>
<li>This is the error metrics of the above processing logic
Almost all errors are retryable errors so it’s not a problem.</li>
<li>Need to monitor error</li>
<li>When fired, Go to Kibana to find logs about the error details.
The most common error is missing the ElasticSearch index field -- an index field is added in dynamicconfig but not in ElasticSearch, or vice versa . If so, follow the runbook to add the field to ElasticSearch or dynamic config.</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">es_processor_error</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">es_processor_corrupted_data</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-es-processor-latency">Kafka-&gt;ES processor latency<a href="#kafka-es-processor-latency" class="hash-link" aria-label="Direct link to Kafka-&gt;ES processor latency" title="Direct link to Kafka-&gt;ES processor latency">​</a></h3>
<ul>
<li>The latency of the processing logic</li>
<li>No monitor needed</li>
<li>Datadog query example</li>
</ul>
<div class="language-dql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cadence_worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">es_processor_process_msg_latency</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">quantile</span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">$pXXLatency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadence-dependency-metrics-monitor-suggestion">Cadence Dependency Metrics Monitor suggestion<a href="#cadence-dependency-metrics-monitor-suggestion" class="hash-link" aria-label="Direct link to Cadence Dependency Metrics Monitor suggestion" title="Direct link to Cadence Dependency Metrics Monitor suggestion">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="computing-platform-metrics-for-cadence-deployment">Computing platform metrics for Cadence deployment<a href="#computing-platform-metrics-for-cadence-deployment" class="hash-link" aria-label="Direct link to Computing platform metrics for Cadence deployment" title="Direct link to Computing platform metrics for Cadence deployment">​</a></h3>
<p>Cadence server being deployed on any computing platform(e.g. Kubernetese) should be monitored on the blow metrics:</p>
<ul>
<li>CPU</li>
<li>Memory</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="database">Database<a href="#database" class="hash-link" aria-label="Direct link to Database" title="Direct link to Database">​</a></h3>
<p>Depends on which database, you should at least monitor on the below metrics</p>
<ul>
<li>Disk Usage</li>
<li>CPU</li>
<li>Memory</li>
<li>Read API latency</li>
<li>Write API Latency</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-if-applicable">Kafka (if applicable)<a href="#kafka-if-applicable" class="hash-link" aria-label="Direct link to Kafka (if applicable)" title="Direct link to Kafka (if applicable)">​</a></h3>
<ul>
<li>Disk Usage</li>
<li>CPU</li>
<li>Memory</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="elasticsearch-if-applicable">ElasticSearch (if applicable)<a href="#elasticsearch-if-applicable" class="hash-link" aria-label="Direct link to ElasticSearch (if applicable)" title="Direct link to ElasticSearch (if applicable)">​</a></h3>
<ul>
<li>Disk Usage</li>
<li>CPU</li>
<li>Memory</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadence-service-slo-recommendation">Cadence Service SLO Recommendation<a href="#cadence-service-slo-recommendation" class="hash-link" aria-label="Direct link to Cadence Service SLO Recommendation" title="Direct link to Cadence Service SLO Recommendation">​</a></h2>
<ul>
<li>Core API availability: <code>99.9%</code></li>
<li>Core API latency: <code>&lt;1s</code></li>
<li>Overall task dispatch latency: <code>&lt;2s</code> (queue_latency for transfer task and timer task)</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/cadence-workflow/Cadence-Docs/tree/master/docs/07-operation-guide/03-monitoring.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cadence-Docs/docs/operation-guide/maintain"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cluster Maintenance</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cadence-Docs/docs/operation-guide/troubleshooting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cluster Troubleshooting</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#datadog-dashboard-templates" class="table-of-contents__link toc-highlight">DataDog dashboard templates</a></li><li><a href="#grafanaprometheus-dashboard-templates" class="table-of-contents__link toc-highlight">Grafana+Prometheus dashboard templates</a></li><li><a href="#periodic-testscanary-for-health-check" class="table-of-contents__link toc-highlight">Periodic tests(Canary) for health check</a></li><li><a href="#cadence-frontend-monitoring" class="table-of-contents__link toc-highlight">Cadence Frontend Monitoring</a><ul><li><a href="#service-availabilityserver-metrics" class="table-of-contents__link toc-highlight">Service Availability(server metrics)</a></li><li><a href="#startworkflow-per-second" class="table-of-contents__link toc-highlight">StartWorkflow Per Second</a></li><li><a href="#activities-started-per-second" class="table-of-contents__link toc-highlight">Activities Started Per Second</a></li><li><a href="#decisions-started-per-second" class="table-of-contents__link toc-highlight">Decisions Started Per Second</a></li><li><a href="#periodical-test-suite-successaka-canary" class="table-of-contents__link toc-highlight">Periodical Test Suite Success(aka Canary)</a></li><li><a href="#frontend-all-api-per-second" class="table-of-contents__link toc-highlight">Frontend all API per second</a></li><li><a href="#frontend-api-per-second-breakdown-per-operation" class="table-of-contents__link toc-highlight">Frontend API per second (breakdown per operation)</a></li><li><a href="#frontend-api-errors-per-secondbreakdown-per-operation" class="table-of-contents__link toc-highlight">Frontend API errors per second(breakdown per operation)</a></li><li><a href="#frontend-regular-api-latency" class="table-of-contents__link toc-highlight">Frontend Regular API Latency</a></li><li><a href="#frontend-listworkflow-api-latency" class="table-of-contents__link toc-highlight">Frontend ListWorkflow API Latency</a></li><li><a href="#frontend-long-poll-api-latency" class="table-of-contents__link toc-highlight">Frontend Long Poll API Latency</a></li><li><a href="#frontend-get-historyquery-workflow-api-latency" class="table-of-contents__link toc-highlight">Frontend Get History/Query Workflow API Latency</a></li><li><a href="#frontend-workflowclient-api-per-seconds-by-domain" class="table-of-contents__link toc-highlight">Frontend WorkflowClient API per seconds by domain</a></li></ul></li><li><a href="#cadence-application-monitoring" class="table-of-contents__link toc-highlight">Cadence Application Monitoring</a><ul><li><a href="#workflow-start-and-successful-completion" class="table-of-contents__link toc-highlight">Workflow Start and Successful completion</a></li><li><a href="#workflow-failure" class="table-of-contents__link toc-highlight">Workflow Failure</a></li><li><a href="#decision-poll-counters" class="table-of-contents__link toc-highlight">Decision Poll Counters</a></li><li><a href="#decisiontasks-scheduled-per-second" class="table-of-contents__link toc-highlight">DecisionTasks Scheduled per second</a></li><li><a href="#decision-scheduled-to-start-latency" class="table-of-contents__link toc-highlight">Decision Scheduled To Start Latency</a></li><li><a href="#decision-execution-failure" class="table-of-contents__link toc-highlight">Decision Execution Failure</a></li><li><a href="#decision-execution-timeout" class="table-of-contents__link toc-highlight">Decision Execution Timeout</a></li><li><a href="#workflow-end-to-end-latency" class="table-of-contents__link toc-highlight">Workflow End to End Latency</a></li><li><a href="#workflow-panic-and-nondeterministicerror" class="table-of-contents__link toc-highlight">Workflow Panic and NonDeterministicError</a></li><li><a href="#workflow-sticky-cache-hit-rate-and-miss-count" class="table-of-contents__link toc-highlight">Workflow Sticky Cache Hit Rate and Miss Count</a></li><li><a href="#activity-task-operations" class="table-of-contents__link toc-highlight">Activity Task Operations</a></li><li><a href="#local-activity-task-operations" class="table-of-contents__link toc-highlight">Local Activity Task Operations</a></li><li><a href="#activity-execution-latency" class="table-of-contents__link toc-highlight">Activity Execution Latency</a></li><li><a href="#activity-poll-counters" class="table-of-contents__link toc-highlight">Activity Poll Counters</a></li><li><a href="#activitytasks-scheduled-per-second" class="table-of-contents__link toc-highlight">ActivityTasks Scheduled per second</a></li><li><a href="#activity-scheduled-to-start-latency" class="table-of-contents__link toc-highlight">Activity Scheduled To Start Latency</a></li><li><a href="#activity-failure" class="table-of-contents__link toc-highlight">Activity Failure</a></li><li><a href="#service-api-success-rate" class="table-of-contents__link toc-highlight">Service API success rate</a></li><li><a href="#service-api-latency" class="table-of-contents__link toc-highlight">Service API Latency</a></li><li><a href="#service-api-breakdown" class="table-of-contents__link toc-highlight">Service API Breakdown</a></li><li><a href="#service-api-error-breakdown" class="table-of-contents__link toc-highlight">Service API Error Breakdown</a></li><li><a href="#max-event-blob-size" class="table-of-contents__link toc-highlight">Max Event Blob size</a></li><li><a href="#max-history-size" class="table-of-contents__link toc-highlight">Max History Size</a></li><li><a href="#max-history-length" class="table-of-contents__link toc-highlight">Max History Length</a></li></ul></li><li><a href="#cadence-history-service-monitoring" class="table-of-contents__link toc-highlight">Cadence History Service Monitoring</a><ul><li><a href="#history-shard-movements" class="table-of-contents__link toc-highlight">History shard movements</a></li><li><a href="#transfer-tasks-per-second" class="table-of-contents__link toc-highlight">Transfer Tasks Per Second</a></li><li><a href="#timer-tasks-per-second" class="table-of-contents__link toc-highlight">Timer Tasks Per Second</a></li><li><a href="#transfer-tasks-per-domain" class="table-of-contents__link toc-highlight">Transfer Tasks Per Domain</a></li><li><a href="#timer-tasks-per-domain" class="table-of-contents__link toc-highlight">Timer Tasks Per Domain</a></li><li><a href="#transfer-latency-by-type" class="table-of-contents__link toc-highlight">Transfer Latency by Type</a></li><li><a href="#timer-task-latency-by-type" class="table-of-contents__link toc-highlight">Timer Task Latency by type</a></li><li><a href="#note-task-queue-latency-vs-executing-latency-vs-processing-latency-in-transfer--timer-task-latency-metrics" class="table-of-contents__link toc-highlight">NOTE: Task Queue Latency vs Executing Latency vs Processing Latency In Transfer &amp; Timer Task Latency Metrics</a></li><li><a href="#transfer-task-latency-per-domain" class="table-of-contents__link toc-highlight">Transfer Task Latency Per Domain</a></li><li><a href="#timer-task-latency-per-domain" class="table-of-contents__link toc-highlight">Timer Task Latency Per Domain</a></li><li><a href="#history-api-per-second" class="table-of-contents__link toc-highlight">History API per Second</a></li><li><a href="#history-api-errors-per-second" class="table-of-contents__link toc-highlight">History API Errors per Second</a></li><li><a href="#max-history-size-1" class="table-of-contents__link toc-highlight">Max History Size</a></li><li><a href="#max-history-length-1" class="table-of-contents__link toc-highlight">Max History Length</a></li><li><a href="#max-event-blob-size-1" class="table-of-contents__link toc-highlight">Max Event Blob Size</a></li></ul></li><li><a href="#cadence-matching-service-monitoring" class="table-of-contents__link toc-highlight">Cadence Matching Service Monitoring</a><ul><li><a href="#matching-apis-per-second" class="table-of-contents__link toc-highlight">Matching APIs per Second</a></li><li><a href="#matching-api-errors-per-second" class="table-of-contents__link toc-highlight">Matching API Errors per Second</a></li><li><a href="#matching-regular-api-latency" class="table-of-contents__link toc-highlight">Matching Regular API Latency</a></li><li><a href="#sync-match-latency" class="table-of-contents__link toc-highlight">Sync Match Latency:</a></li><li><a href="#async-match-latency" class="table-of-contents__link toc-highlight">Async match Latency</a></li></ul></li><li><a href="#cadence-default-persistence-monitoring" class="table-of-contents__link toc-highlight">Cadence Default Persistence Monitoring</a><ul><li><a href="#persistence-availability" class="table-of-contents__link toc-highlight">Persistence Availability</a></li><li><a href="#persistence-by-service-tps" class="table-of-contents__link toc-highlight">Persistence By Service TPS</a></li><li><a href="#persistence-by-operation-tps" class="table-of-contents__link toc-highlight">Persistence By Operation TPS</a></li><li><a href="#persistence-by-operation-latency" class="table-of-contents__link toc-highlight">Persistence By Operation Latency</a></li><li><a href="#persistence-error-by-operation-count" class="table-of-contents__link toc-highlight">Persistence Error By Operation Count</a></li></ul></li><li><a href="#cadence-advanced-visibility-persistence-monitoringif-applicable" class="table-of-contents__link toc-highlight">Cadence Advanced Visibility Persistence Monitoring(if applicable)</a><ul><li><a href="#persistence-availability-1" class="table-of-contents__link toc-highlight">Persistence Availability</a></li><li><a href="#persistence-by-service-tps-1" class="table-of-contents__link toc-highlight">Persistence By Service TPS</a></li><li><a href="#persistence-by-operation-tpsread-es-write-kafka" class="table-of-contents__link toc-highlight">Persistence By Operation TPS(read: ES, write: Kafka)</a></li><li><a href="#persistence-by-operation-latencyin-seconds-read-es-write-kafka" class="table-of-contents__link toc-highlight">Persistence By Operation Latency(in seconds) (read: ES, write: Kafka)</a></li><li><a href="#persistence-error-by-operation-count-read-es-write-kafka" class="table-of-contents__link toc-highlight">Persistence Error By Operation Count (read: ES, write: Kafka)</a></li><li><a href="#kafka-es-processor-counter" class="table-of-contents__link toc-highlight">Kafka-&gt;ES processor counter</a></li><li><a href="#kafka-es-processor-error" class="table-of-contents__link toc-highlight">Kafka-&gt;ES processor error</a></li><li><a href="#kafka-es-processor-latency" class="table-of-contents__link toc-highlight">Kafka-&gt;ES processor latency</a></li></ul></li><li><a href="#cadence-dependency-metrics-monitor-suggestion" class="table-of-contents__link toc-highlight">Cadence Dependency Metrics Monitor suggestion</a><ul><li><a href="#computing-platform-metrics-for-cadence-deployment" class="table-of-contents__link toc-highlight">Computing platform metrics for Cadence deployment</a></li><li><a href="#database" class="table-of-contents__link toc-highlight">Database</a></li><li><a href="#kafka-if-applicable" class="table-of-contents__link toc-highlight">Kafka (if applicable)</a></li><li><a href="#elasticsearch-if-applicable" class="table-of-contents__link toc-highlight">ElasticSearch (if applicable)</a></li></ul></li><li><a href="#cadence-service-slo-recommendation" class="table-of-contents__link toc-highlight">Cadence Service SLO Recommendation</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/get-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/go-client">Go Client</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/java-client">Java Client</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/cli">Command Line Interface</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/operation-guide">Operation Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/cadence-workflow+uber-cadence" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://t.uber.com/cadence-slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Community Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/cadenceworkflow/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/cadence-workflow/cadence" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Uber Technologies, Inc.</div></div></div></footer></div>
</body>
</html>