<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-java-client/retries" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Retries | Cadence</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cadenceworkflow.io/Cadence-Docs/img/social-card-min.jpg"><meta data-rh="true" name="twitter:image" content="https://cadenceworkflow.io/Cadence-Docs/img/social-card-min.jpg"><meta data-rh="true" property="og:url" content="https://cadenceworkflow.io/Cadence-Docs/docs/java-client/retries"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Retries | Cadence"><meta data-rh="true" name="description" content="Activitiesworkflow can fail due to various intermediate conditions. In those cases, we want"><meta data-rh="true" property="og:description" content="Activitiesworkflow can fail due to various intermediate conditions. In those cases, we want"><link data-rh="true" rel="icon" href="/Cadence-Docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cadenceworkflow.io/Cadence-Docs/docs/java-client/retries"><link data-rh="true" rel="alternate" href="https://cadenceworkflow.io/Cadence-Docs/docs/java-client/retries" hreflang="en"><link data-rh="true" rel="alternate" href="https://cadenceworkflow.io/Cadence-Docs/docs/java-client/retries" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://J7SVDVT89Z-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/Cadence-Docs/blog/rss.xml" title="Cadence RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cadence-Docs/blog/atom.xml" title="Cadence Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W63QD8QE6E"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-W63QD8QE6E",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=G-W63QD8QE6E",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Cadence" href="/Cadence-Docs/opensearch.xml"><link rel="stylesheet" href="/Cadence-Docs/assets/css/styles.fc45ed42.css">
<script src="/Cadence-Docs/assets/js/runtime~main.1505502b.js" defer="defer"></script>
<script src="/Cadence-Docs/assets/js/main.2ef2f634.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=G-W63QD8QE6E" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">We are looking to hear your feedback, please fill the <a target="_blank" rel="noopener noreferrer" href="https://www.surveymonkey.com/r/9RL7YX9">Cadence 2024 OSS community survey</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Cadence-Docs/"><div class="navbar__logo"><img src="/Cadence-Docs/img/cadence-logo.svg" alt="Cadence Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Cadence-Docs/img/logo-white.svg" alt="Cadence Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Cadence-Docs/docs/get-started">Docs</a><a class="navbar__item navbar__link" href="/Cadence-Docs/blog">Blog</a><a class="navbar__item navbar__link" href="/Cadence-Docs/community/support">Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Repositories</a><ul class="dropdown__menu"><li><a href="https://github.com/cadence-workflow/cadence" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence Service<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-go-client" target="_blank" rel="noopener noreferrer" class="dropdown__link">Go Client<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-java-client" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java Client<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-samples" target="_blank" rel="noopener noreferrer" class="dropdown__link">Go Samples<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-java-samples" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java Samples<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-web" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence Web<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-idl" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cadence IDLs<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/cadence-workflow/cadence-charts" target="_blank" rel="noopener noreferrer" class="dropdown__link">Helm Charts<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/get-started">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/use-cases">Use Cases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/concepts">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Cadence-Docs/docs/java-client">Java Client</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/client-overview">Client SDK Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/workflow-interface">Workflow interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/implementing-workflows">Implementing workflows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/starting-workflow-executions">Starting workflows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/activity-interface">Activity interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/versioning">Versioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/distributed-cron">Distributed CRON</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/workers">Worker service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/signals">Signals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/queries">Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Cadence-Docs/docs/java-client/retries">Retries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/child-workflows">Child workflows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/exception-handling">Exception Handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/continue-as-new">Continue As New</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/side-effect">Side Effect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cadence-Docs/docs/java-client/workflow-replay-shadowing">Workflow Replay and Shadowing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/go-client">Go Client</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/cli">Command Line Interface</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/operation-guide">Production Operation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/workflow-troubleshooting">Workflow Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Cadence-Docs/docs/about">About</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Cadence-Docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Java Client</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Retries</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Activity and workflow retries</h1></header>
<p>Activities and workflows can fail due to various intermediate conditions. In those cases, we want
to retry the failed activity or child workflow or even the parent workflow. This can be achieved
by supplying an optional <a href="https://www.javadoc.io/static/com.uber.cadence/cadence-client/2.7.9-alpha/com/cadence-workflow/cadence/common/RetryOptions.Builder.html#setInitialInterval-java.time.Duration-" target="_blank" rel="noopener noreferrer">retry options</a>.</p>
<blockquote>
<p>Note that sometimes it&#x27;s also referred as RetryPolicy</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="retryoptions">RetryOptions<a href="#retryoptions" class="hash-link" aria-label="Direct link to RetryOptions" title="Direct link to RetryOptions">​</a></h2>
<p>A RetryOptions includes the following.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="initialinterval">InitialInterval<a href="#initialinterval" class="hash-link" aria-label="Direct link to InitialInterval" title="Direct link to InitialInterval">​</a></h3>
<p>Backoff interval for the first retry. If coefficient is 1.0 then it is used for all retries.
Required, no default value.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="backoffcoefficient">BackoffCoefficient<a href="#backoffcoefficient" class="hash-link" aria-label="Direct link to BackoffCoefficient" title="Direct link to BackoffCoefficient">​</a></h3>
<p>Coefficient used to calculate the next retry backoff interval.
The next retry interval is previous interval multiplied by this coefficient.
Must be 1 or larger. Default is 2.0.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="maximuminterval">MaximumInterval<a href="#maximuminterval" class="hash-link" aria-label="Direct link to MaximumInterval" title="Direct link to MaximumInterval">​</a></h3>
<p>Maximum backoff interval between retries. Exponential backoff leads to interval increase.
This value is the cap of the interval. Default is 100x of initial interval.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="expirationinterval">ExpirationInterval<a href="#expirationinterval" class="hash-link" aria-label="Direct link to ExpirationInterval" title="Direct link to ExpirationInterval">​</a></h3>
<p>Maximum time to retry. Either ExpirationInterval or MaximumAttempts is required.
When exceeded the retries stop even if maximum retries is not reached yet.
First (non-retry) attempt is unaffected by this field and is guaranteed to run
for the entirety of the workflow timeout duration (ExecutionStartToCloseTimeoutSeconds).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="maximumattempts">MaximumAttempts<a href="#maximumattempts" class="hash-link" aria-label="Direct link to MaximumAttempts" title="Direct link to MaximumAttempts">​</a></h3>
<p>Maximum number of attempts. When exceeded the retries stop even if not expired yet.
If not set or set to 0, it means unlimited, and relies on ExpirationInterval to stop.
Either MaximumAttempts or ExpirationInterval is required.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nonretriableerrorreasonsvia-setdonotretry">NonRetriableErrorReasons(via setDoNotRetry)<a href="#nonretriableerrorreasonsvia-setdonotretry" class="hash-link" aria-label="Direct link to NonRetriableErrorReasons(via setDoNotRetry)" title="Direct link to NonRetriableErrorReasons(via setDoNotRetry)">​</a></h3>
<p>Non-Retriable errors. This is optional. Cadence server will stop retry if error reason matches this list.
When matching an exact match is used. So adding RuntimeException.class to this list is going to include only RuntimeException itself, not all of its subclasses. The reason for such behaviour is to be able to support server side retries without knowledge of Java exception hierarchy. When considering an exception type a cause of ActivityFailureException and ChildWorkflowFailureException is looked at.
Error and CancellationException are never retried and are not even passed to this filter.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="activity-timeout-usage">Activity Timeout Usage<a href="#activity-timeout-usage" class="hash-link" aria-label="Direct link to Activity Timeout Usage" title="Direct link to Activity Timeout Usage">​</a></h2>
<p>It&#x27;s probably too complicated to learn how to set those timeouts by reading the above. There is an easy way to deal with it.</p>
<p><strong>LocalActivity without retry</strong>: Use ScheduleToClose for overall timeout</p>
<p><strong>Regular Activity without retry</strong>:</p>
<ol>
<li>Use ScheduleToClose for overall timeout</li>
<li>Leave ScheduleToStart and StartToClose empty</li>
<li>If ScheduleToClose is too large(like 10 mins), then set Heartbeat timeout to a smaller value like 10s. Call heartbeat API inside activity regularly.</li>
</ol>
<p><strong>LocalActivity with retry</strong>:</p>
<ol>
<li>Use ScheduleToClose as timeout of each attempt.</li>
<li>Use retryOptions.InitialInterval, retryOptions.BackoffCoefficient, retryOptions.MaximumInterval to control backoff.</li>
<li>Use retryOptions.ExperiationInterval as overall timeout of all attempts.</li>
<li>Leave retryOptions.MaximumAttempts empty.</li>
</ol>
<p><strong>Regular Activity with retry</strong>:</p>
<ol>
<li>Use ScheduleToClose as timeout of each attempt</li>
<li>Leave ScheduleToStart and StartToClose empty</li>
<li>If ScheduleToClose is too large(like 10 mins), then set Heartbeat timeout to a smaller value like 10s. Call heartbeat API inside activity regularly.</li>
<li>Use retryOptions.InitialInterval, retryOptions.BackoffCoefficient, retryOptions.MaximumInterval to control backoff.</li>
<li>Use retryOptions.ExperiationInterval as overall timeout of all attempts.</li>
<li>Leave retryOptions.MaximumAttempts empty.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="activity-timeout-internals">Activity Timeout Internals<a href="#activity-timeout-internals" class="hash-link" aria-label="Direct link to Activity Timeout Internals" title="Direct link to Activity Timeout Internals">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basics-without-retry">Basics without Retry<a href="#basics-without-retry" class="hash-link" aria-label="Direct link to Basics without Retry" title="Direct link to Basics without Retry">​</a></h3>
<p>Things are easier to understand in the world without retry. Because Cadence started from it.</p>
<ul>
<li>
<p>ScheduleToClose timeout is the overall end-to-end timeout from a workflow&#x27;s perspective.</p>
</li>
<li>
<p>ScheduleToStart timeout is the time that activity worker needed to start an activity. Exceeding this timeout, activity will return an ScheduleToStart timeout error/exception to workflow</p>
</li>
<li>
<p>StartToClose timeout is the time that an activity needed to run. Exceeding this will return
StartToClose to workflow.</p>
</li>
<li>
<p><strong>Requirement and defaults:</strong></p>
<ul>
<li>Either ScheduleToClose is provided or both of ScheduleToStart and StartToClose are provided.</li>
<li>If only ScheduleToClose, then ScheduleToStart and StartToClose are default to it.</li>
<li>If only ScheduleToStart and StartToClose are provided, then <code>ScheduleToClose = ScheduleToStart + StartToClose</code>.</li>
<li>All of them are capped by workflowTimeout. (e.g. if workflowTimeout is 1hour, set 2 hour for ScheduleToClose will still get 1 hour :<code>ScheduleToClose=Min(ScheduleToClose, workflowTimeout)</code> )</li>
</ul>
</li>
</ul>
<p><strong>So why are they?</strong></p>
<p>You may notice that ScheduleToClose is only useful when
<code>ScheduleToClose &lt; ScheduleToStart + StartToClose</code>. Because if <code>ScheduleToClose &gt;= ScheduleToStart+StartToClose</code> the ScheduleToClose timeout is already enforced by the combination of the other two, and it become meaningless.</p>
<p>So the main use case of ScheduleToClose being less than the sum of two is that people want to limit the overall timeout of the activity but give more timeout for scheduleToStart or startToClose. <strong>This is extremely rare use case</strong>.</p>
<p>Also the main use case that people want to distinguish ScheduleToStart and StartToClose is that the workflow may need to do some special handling for ScheduleToStart timeout error. <strong>This is also very rare use case</strong>.</p>
<p>Therefore, you can understand why in TL;DR that I recommend only using <strong>ScheduleToClose</strong> but leave the other two empty. Because only in some rare cases you may need it. If you can&#x27;t think of the use case, then you do not need it.</p>
<p>LocalActivity doesn&#x27;t have ScheduleToStart/StartToClose because it&#x27;s started directly inside workflow worker without server scheduling involved.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="heartbeat-timeout">Heartbeat timeout<a href="#heartbeat-timeout" class="hash-link" aria-label="Direct link to Heartbeat timeout" title="Direct link to Heartbeat timeout">​</a></h3>
<p>Heartbeat is very important for long running activity, to prevent it from getting stuck. Not only bugs can cause activity getting stuck, regular deployment/host restart/failure could also cause it. Because without heartbeat, Cadence server couldn&#x27;t know whether or not the activity is still being worked on. See more details about here <a href="https://stackoverflow.com/questions/65118584/solutions-to-stuck-timers-activities-in-cadence-swf-stepfunctions/65118585#65118585" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/65118584/solutions-to-stuck-timers-activities-in-cadence-swf-stepfunctions/65118585#65118585</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retryoptions-and-activity-with-retry">RetryOptions and Activity with Retry<a href="#retryoptions-and-activity-with-retry" class="hash-link" aria-label="Direct link to RetryOptions and Activity with Retry" title="Direct link to RetryOptions and Activity with Retry">​</a></h3>
<p>First of all, here RetryOptions is for <code>server side</code> backoff retry -- meaning that the retry is managed automatically by Cadence without interacting with workflows. Because retry is managed by Cadence, the activity has to be specially handled in Cadence history that the started event can not written until the activity is closed. Here is some reference: <a href="https://stackoverflow.com/questions/65113363/why-an-activity-task-is-scheduled-but-not-started/65113365#65113365" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/65113363/why-an-activity-task-is-scheduled-but-not-started/65113365#65113365</a></p>
<p>In fact, workflow can do <code>client side</code> retry on their own. This means workflow will be managing the retry logic. You can write your own retry function, or there is some helper function in SDK,  like <code>Workflow.retry</code> in Cadence-java-client. Client side retry will show all start events immediately, but there will be many events in the history when retrying for a single activity. It&#x27;s not recommended because of performance issue.</p>
<p>So what do the options mean:</p>
<ul>
<li>
<p>ExpirationInterval:</p>
<ul>
<li>It replaces the ScheduleToClose timeout to become the actual overall timeout of the activity for all attempts.</li>
<li>It&#x27;s also capped to workflow timeout like other three timeout options. <code>ScheduleToClose = Min(ScheduleToClose, workflowTimeout)</code></li>
<li>The timeout of each attempt is StartToClose, but StartToClose defaults to ScheduleToClose like explanation above.</li>
<li>ScheduleToClose will be extended to ExpirationInterval:
<code>ScheduleToClose = Max(ScheduleToClose, ExpirationInterval)</code>, and this happens before ScheduleToClose is copied to ScheduleToClose and StartToClose.</li>
</ul>
</li>
<li>
<p>InitialInterval: the interval of first retry</p>
</li>
<li>
<p>BackoffCoefficient: self explained</p>
</li>
<li>
<p>MaximumInterval: maximum of the interval during retry</p>
</li>
<li>
<p>MaximumAttempts: the maximum attempts. If existing with ExpirationInterval, then retry stops when either one of them is exceeded.</p>
</li>
<li>
<p><strong>Requirements and defaults</strong>:</p>
</li>
<li>
<p>Either MaximumAttempts or ExpirationInterval is required. ExpirationInterval is set to workflowTimeout if not provided.</p>
</li>
</ul>
<p>Since ExpirationInterval is always there, and in fact it&#x27;s more useful. And I think it&#x27;s quite confusing to use MaximumAttempts, so I would recommend just use ExpirationInterval. Unless you really need it.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/cadence-workflow/Cadence-Docs/tree/master/docs/04-java-client/12-retries.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cadence-Docs/docs/java-client/queries"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Queries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cadence-Docs/docs/java-client/child-workflows"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Child workflows</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#retryoptions" class="table-of-contents__link toc-highlight">RetryOptions</a><ul><li><a href="#initialinterval" class="table-of-contents__link toc-highlight">InitialInterval</a></li><li><a href="#backoffcoefficient" class="table-of-contents__link toc-highlight">BackoffCoefficient</a></li><li><a href="#maximuminterval" class="table-of-contents__link toc-highlight">MaximumInterval</a></li><li><a href="#expirationinterval" class="table-of-contents__link toc-highlight">ExpirationInterval</a></li><li><a href="#maximumattempts" class="table-of-contents__link toc-highlight">MaximumAttempts</a></li><li><a href="#nonretriableerrorreasonsvia-setdonotretry" class="table-of-contents__link toc-highlight">NonRetriableErrorReasons(via setDoNotRetry)</a></li></ul></li><li><a href="#activity-timeout-usage" class="table-of-contents__link toc-highlight">Activity Timeout Usage</a></li><li><a href="#activity-timeout-internals" class="table-of-contents__link toc-highlight">Activity Timeout Internals</a><ul><li><a href="#basics-without-retry" class="table-of-contents__link toc-highlight">Basics without Retry</a></li><li><a href="#heartbeat-timeout" class="table-of-contents__link toc-highlight">Heartbeat timeout</a></li><li><a href="#retryoptions-and-activity-with-retry" class="table-of-contents__link toc-highlight">RetryOptions and Activity with Retry</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/get-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/go-client">Go Client</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/java-client">Java Client</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/cli">Command Line Interface</a></li><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/docs/operation-guide">Operation Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/cadence-workflow+uber-cadence" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://t.uber.com/cadence-slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Community Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/cadenceworkflow/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Cadence-Docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/cadence-workflow/cadence" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Uber Technologies, Inc.</div></div></div></footer></div>
</body>
</html>