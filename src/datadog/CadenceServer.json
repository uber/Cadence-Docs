{"title":"Cadence Server","description":"Custom metrics for cadence_frontend (cloned)","widgets":[{"id":4197425354469780,"definition":{"title":"Overall","type":"group","show_title":true,"layout_type":"ordered","widgets":[{"id":7318452924405518,"definition":{"title":"Service Availability(server metrics)","type":"query_value","requests":[{"formulas":[{"formula":"(1 - query2 / query1) * 100"}],"response_format":"scalar","queries":[{"query":"sum:cadence_frontend.cadence_errors{$env,$Availability_Zone}","data_source":"metrics","name":"query2","aggregator":"sum"},{"query":"sum:cadence_frontend.cadence_requests{$env,$Availability_Zone}","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"precision":2}},{"id":3007305508271598,"definition":{"title":"StartWorkflow Per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_requests{$env AND $Availability_Zone AND (operation IN (startworkflowexecution,signalwithstartworkflowexecution))} by {operation}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":8690519393933274,"definition":{"title":"Activities Started Per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_requests{$env,$Availability_Zone,operation:pollforactivitytask} by {operation}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":3028523459566082,"definition":{"title":"Decisions Started Per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_requests{$env,$Availability_Zone,operation:pollforactivitytask} by {operation}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1232789236549370,"definition":{"title":"Periodical Test Suite Success(aka Canary)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.workflow_success{workflowtype:workflow_sanity,$env} by {workflowtype}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}}]}},{"id":7006845761795350,"definition":{"title":"Frontend","type":"group","show_title":true,"layout_type":"ordered","widgets":[{"id":6582666541590736,"definition":{"title":"Service API success rate by Client(includes client side error like EntityNotExists)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"(1 - query2 / query1) * 100"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:cadence_client.cadence_error{$env} by {app}.as_count()","data_source":"metrics","name":"query2"},{"query":"sum:cadence_client.cadence_request{$env} by {app}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5770958892375138,"definition":{"title":"Service Availability(server metrics)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"(1 - query2 / query1) * 100"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_errors{$env,$Availability_Zone}","data_source":"metrics","name":"query2"},{"query":"sum:cadence_frontend.cadence_requests{$env,$Availability_Zone}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5756748770458430,"definition":{"title":"All API per second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Requests","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_requests{$env,$Availability_Zone}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":571239942327076,"definition":{"title":"API per second(breakdown per operation)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Requests","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_requests{$env,$Availability_Zone} by {operation}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":4576966870029962,"definition":{"title":"Regular API Latency","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_frontend.cadence_latency.quantile{(operation NOT IN (pollfordecisiontask,pollforactivitytask,getworkflowexecutionhistory,queryworkflow,listworkflowexecutions,listclosedworkflowexecutions,listopenworkflowexecutions,countworkflowexecutions)) AND $env AND $Availability_Zone AND $pXXLatency} by {operation}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":6111474522853542,"definition":{"title":"ListWorkflow API Latency","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_frontend.cadence_latency.quantile{(operation IN (listclosedworkflowexecutions,listopenworkflowexecutions,listworkflowexecutions,countworkflowexecutions)) AND $env AND $Availability_Zone AND $pXXLatency} by {operation}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":8825913901886726,"definition":{"title":"Long Poll API Latency ","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Requests","formula":"query1"},{"alias":"Requests","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_frontend.cadence_latency.quantile{$env,$Availability_Zone,$pXXLatency,operation:pollforactivitytask} by {operation}","data_source":"metrics","name":"query1"},{"query":"avg:cadence_frontend.cadence_latency.quantile{$env,$Availability_Zone,$pXXLatency,operation:pollfordecisiontask} by {operation}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5792381575802732,"definition":{"title":"GetHistory/QueryWorkflow API Latency ","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Requests","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_frontend.cadence_latency.quantile{(operation IN (getworkflowexecutionhistory,queryworkflow)) AND $env AND $Availability_Zone AND $pXXLatency} by {operation}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1749629614227724,"definition":{"title":"API  errors per second(breakdown per operation)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Internal server error","formula":"query1"},{"alias":"Bad Requests error","formula":"query2"},{"alias":"QueryFailed error","formula":"query3"},{"alias":"ContextTimeout error","formula":"query4"},{"alias":"EntityNotExists error","formula":"query5"},{"alias":"WorkflowAlreadyStarted error","formula":"query6"},{"alias":"WorkflowAlreadyCompleted","formula":"query7"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_errors{$env,$Availability_Zone} by {operation}.as_rate()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_frontend.cadence_errors_bad_request{$env,$Availability_Zone} by {operation}.as_rate()","data_source":"metrics","name":"query2"},{"query":"sum:cadence_frontend.cadence_errors_query_failed{$env,$Availability_Zone} by {operation}.as_rate()","data_source":"metrics","name":"query3"},{"query":"sum:cadence_frontend.cadence_errors_context_timeout{$env,$Availability_Zone} by {operation}","data_source":"metrics","name":"query4"},{"query":"sum:cadence_frontend.cadence_errors_entity_not_exists{$env,$Availability_Zone} by {operation}","data_source":"metrics","name":"query5"},{"query":"sum:cadence_frontend.cadence_errors_execution_already_started{$env,$Availability_Zone} by {operation}","data_source":"metrics","name":"query6"},{"query":"sum:cadence_frontend.cadence_errors_workflow_execution_already_completed{$env,$Availability_Zone} by {operation}","data_source":"metrics","name":"query7"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":8438281967817694,"definition":{"title":"WorkflowClient API per seconds by domain","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_requests{(operation IN (signalwithstartworkflowexecution,signalworkflowexecution,startworkflowexecution,terminateworkflowexecution,resetworkflowexecution,requestcancelworkflowexecution,listworkflowexecutions)) AND $env AND $Availability_Zone} by {domain,operation}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":6227860853786832,"definition":{"title":"Regular API Per Domain","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.cadence_requests{(operation NOT IN (pollfordecisiontask,pollforactivitytask,getworkflowexecutionhistory,queryworkflow,listworkflowexecutions,listclosedworkflowexecutions,listopenworkflowexecutions,countworkflowexecutions)) AND $env AND $Availability_Zone} by {domain}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7630594822884810,"definition":{"title":"Top Domains for Regular Requests","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":25,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"max:cadence_frontend.cadence_requests{(operation IN (signalwithstartworkflowexecution,signalworkflowexecution,startworkflowexecution,terminateworkflowexecution,resetworkflowexecution,requestcancelworkflowexecution,listworkflowexecutions)) AND $env AND $Availability_Zone} by {domain}.as_count()","data_source":"metrics","name":"query1","aggregator":"max"}]}]}},{"id":6729146509029284,"definition":{"title":"Top Domains for Workflow Worker Requests","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"max:cadence_frontend.cadence_requests{(operation IN (pollfordecisiontask,getworkflowexecutionHistory,responddecisiontaskcompleted)) AND $env AND $Availability_Zone} by {domain}.as_count()","data_source":"metrics","name":"query1","aggregator":"max"}]}]}},{"id":3072192261814762,"definition":{"title":" Top Domains for Activity Worker Requests","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":25,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"max:cadence_frontend.cadence_requests{(operation IN (pollforactivitytask,respondactivitytaskcompleted)) AND $env AND $Availability_Zone} by {domain}.as_count()","data_source":"metrics","name":"query1","aggregator":"max"}]}]}},{"id":7816010180982380,"definition":{"title":"Top Domains for All Requests","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":25,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"max:cadence_frontend.cadence_requests{$env,$Availability_Zone} by {domain}.as_count()","data_source":"metrics","name":"query1","aggregator":"max"}]}]}}]}},{"id":7688178232227354,"definition":{"title":"History","type":"group","show_title":true,"layout_type":"ordered","widgets":[{"id":4720062862834396,"definition":{"title":"History Shard Movements","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Membership Changed Count","formula":"query1"},{"alias":"Shard Closed Count","formula":"query2"},{"alias":"Shard Item Created Count","formula":"query3"},{"alias":"Shard Item Removed Count","formula":"query4"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.membership_changed_count{$env,$Availability_Zone,operation:shardcontroller}","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.shard_closed_count{$env,$Availability_Zone,operation:shardcontroller}","data_source":"metrics","name":"query2"},{"query":"sum:cadence_history.sharditem_created_count{$env,$Availability_Zone,operation:shardcontroller}","data_source":"metrics","name":"query3"},{"query":"sum:cadence_history.sharditem_removed_count{$env,$Availability_Zone,operation:shardcontroller}","data_source":"metrics","name":"query4"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1,"definition":{"title":"History API per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.cadence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":6602132101884102,"definition":{"title":"History API Errors per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"},{"alias":"","formula":"query2"},{"alias":"","formula":"query3"},{"alias":"","formula":"query4"},{"alias":"","formula":"query5"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.cadence_errors{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.cadence_errors_entity_not_exists{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query2"},{"query":"sum:cadence_history.cadence_errors_execution_already_started{$Availability_Zone,$env} by {operation}","data_source":"metrics","name":"query3"},{"query":"sum:cadence_history.cadence_errors_workflow_id_exceeded_warn_limit{$Availability_Zone,$env} by {operation}","data_source":"metrics","name":"query4"},{"query":"sum:cadence_history.cadence_errors_workflow_execution_already_completed{$Availability_Zone,$env} by {operation}","data_source":"metrics","name":"query5"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":447415303320806,"definition":{"title":"History API Latency","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.cadence_latency.quantile{$Availability_Zone,$env,$pXXLatency,!operation:pollmutablestate} by {operation}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7451970078567566,"definition":{"title":"Transfer Tasks Per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.task_requests{operation:transferactivetask*,$env,$Availability_Zone} by {operation}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":4322485838068812,"definition":{"title":"Timer Tasks Per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query5"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.task_requests{operation:timeractivetask*,$env,$Availability_Zone} by {operation}.as_rate()","data_source":"metrics","name":"query5"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1752082338078230,"definition":{"title":"Transfer Tasks Per Domain","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.task_requests_per_domain{$env,$Availability_Zone,operation:transferactive*} by {domain}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1471800811950820,"definition":{"title":" Timer Tasks Per Domain","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query4"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.task_requests_per_domain{$env,$Availability_Zone,operation:timeractive*} by {domain}.as_count()","data_source":"metrics","name":"query4"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":6235460850252026,"definition":{"title":"Transfer Task Latency Per Domain","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"executing_latency","formula":"query2"},{"alias":"processing_latency","formula":"query3"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_history.task_latency_per_domain.quantile{$env,$Availability_Zone,operation:transferactive*,$pXXLatency} by {domain}","data_source":"metrics","name":"query2"},{"query":"avg:cadence_history.task_latency_processing_per_domain.quantile{$env,$Availability_Zone,operation:transferactive*,$pXXLatency} by {domain}","data_source":"metrics","name":"query3"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":584679825003382,"definition":{"title":"Timer Task Latency Per Domain","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"executing_latency","formula":"query1"},{"alias":"processing_latency","formula":"query3"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_history.task_latency_per_domain.quantile{$env,$Availability_Zone,operation:timer*,$pXXLatency} by {domain}","data_source":"metrics","name":"query1"},{"query":"avg:cadence_history.task_latency_processing_per_domain.quantile{$env,$Availability_Zone,operation:timer*,$pXXLatency} by {domain}","data_source":"metrics","name":"query3"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":3096933101381572,"definition":{"title":"Transfer Task Executing Latency By TaskType","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"executing_latency","formula":"query9"},{"alias":"processing_latency","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_history.task_latency.quantile{$env,$Availability_Zone,$pXXLatency,operation:transfer*} by {operation}","data_source":"metrics","name":"query9"},{"query":"avg:cadence_history.task_latency_processing.quantile{$env,$Availability_Zone,$pXXLatency,operation:transfer*} by {operation}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7922744047880308,"definition":{"title":"Timer Task Executing Latency By TaskType","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"executing_latency","formula":"query9"},{"alias":"processing_latency","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_history.task_latency.quantile{$env,$Availability_Zone,$pXXLatency,operation:timer*} by {operation}","data_source":"metrics","name":"query9"},{"query":"avg:cadence_history.task_latency_processing.quantile{$env,$Availability_Zone,$pXXLatency,operation:timer*} by {operation}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":3463954451401730,"definition":{"title":"Transfer Task Queue Latency By TaskType","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"queue_latency","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_history.task_latency_queue.quantile{$env,$Availability_Zone,$pXXLatency,operation:transfer*} by {operation}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7046933017506238,"definition":{"title":"Timer Task Queue Latency By TaskType","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"queue_latency","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_history.task_latency_queue.quantile{$env,$Availability_Zone,$pXXLatency,operation:timer*} by {operation}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5606618915782848,"definition":{"title":"Transfer/Timer task throttling by domain","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"transfer task throttling","formula":"query1"},{"alias":"timer task throttling","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_history.transfer_task_throttled_counter{$env,operation:transfer*} by {domain}.as_count()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.timer_task_throttled_counter{$env,operation:transfer*} by {domain}.as_count()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1354371985506380,"definition":{"title":"Max History Size(in bytes) by domain","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1 * 1000000000"}],"response_format":"timeseries","queries":[{"query":"max:cadence_history.history_size.quantile{$env,!domain:all} by {domain}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1145888549561834,"definition":{"title":"Avg History Length by Domain","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"(query1 / query2) * 1000000000"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_history.history_count.sum{$env,!domain:all} by {domain}","data_source":"metrics","name":"query1"},{"query":"avg:cadence_history.history_count.count{$env,!domain:all} by {domain}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5470713958781764,"definition":{"title":"Max Event Blob Size by Domain","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"sizeInBytes","formula":"query1 * 1000000000"}],"response_format":"timeseries","queries":[{"query":"max:cadence_history.event_blob_size.quantile{$env} by {domain}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}}]}},{"id":8662851798229630,"definition":{"title":"Matching","type":"group","show_title":true,"layout_type":"ordered","widgets":[{"id":3564386337540202,"definition":{"title":"Matching APIs per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_matching.cadence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":3632970819998486,"definition":{"title":"Matching API Errors per Second","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"},{"alias":"","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_matching.cadence_errors_per_tl{$Availability_Zone,$env} by {operation,domain,tasklist}.as_rate()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_matching.cadence_errors_query_failed_per_tl{$Availability_Zone,$env} by {operation,domain,tasklist}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5955551288549456,"definition":{"title":"Matching Regular API Latency","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_matching.cadence_latency_per_tl.quantile{$Availability_Zone,$env,$pXXLatency,!operation:pollfor*,!operation:queryworkflow} by {operation,tasklist}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":3849551698282364,"definition":{"title":"Matching Long Poll API Latency ","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_matching.cadence_latency_per_tl.quantile{$Availability_Zone,$env,$pXXLatency,operation:pollfor*} by {operation,tasklist}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":2168280571946448,"definition":{"title":"Sync Match Latency","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_matching.syncmatch_latency_per_tl.quantile{$Availability_Zone,$env,$pXXLatency} by {operation,tasklist,domain}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":4012243421166890,"definition":{"title":"Async Match Latency","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_matching.asyncmatch_latency_per_tl.quantile{$Availability_Zone,$env,$pXXLatency} by {operation,tasklist,domain}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":2584116204600668,"definition":{"title":"AddTasks per Second - domain, tasklist breakdown","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_matching.cadence_requests_per_tl{$Availability_Zone,$env,operation:add*} by {operation,tasklist,domain}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1154787173845974,"definition":{"title":"Other API per Second - domain, tasklist breakdown","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_matching.cadence_requests_per_tl{$Availability_Zone,$env,!operation:add*} by {operation,tasklist,domain}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}}]}},{"id":7816402068840710,"definition":{"title":"Persistence-Database","type":"group","show_title":true,"layout_type":"ordered","widgets":[{"id":1778851627333796,"definition":{"title":"Persistence Availability","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"(1 - query4 / query1) * 100"},{"formula":"(1 - query6 / query5) * 100"},{"formula":"(1 - query7 / query2) * 100"},{"formula":"(1 - query8 / query3) * 100"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_frontend.persistence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query1"},{"query":"avg:cadence_matching.persistence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query5"},{"query":"avg:cadence_history.persistence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query2"},{"query":"avg:cadence_worker.persistence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query3"},{"query":"avg:cadence_frontend.persistence_errors{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query4"},{"query":"avg:cadence_matching.persistence_errors{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query6"},{"query":"avg:cadence_history.persistence_errors{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query7"},{"query":"avg:cadence_worker.persistence_errors{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query8"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1124234892254618,"definition":{"title":"Persistence By Service TPS","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Frontend","formula":"query1"},{"alias":"History","formula":"query2"},{"alias":"Worker","formula":"query3"},{"alias":"Matching","formula":"query4"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.persistence_requests{$Availability_Zone,$env}.as_rate()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.persistence_requests{$Availability_Zone,$env}.as_rate()","data_source":"metrics","name":"query2"},{"query":"sum:cadence_worker.persistence_requests{$Availability_Zone,$env}.as_rate()","data_source":"metrics","name":"query3"},{"query":"sum:cadence_matching.persistence_requests{$Availability_Zone,$env}.as_rate()","data_source":"metrics","name":"query4"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":2,"definition":{"title":"Persistence By Operation TPS","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Frontend","formula":"query1"},{"alias":"History","formula":"query2"},{"alias":"Worker","formula":"query3"},{"alias":"Matching","formula":"query4"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.persistence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.persistence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query2"},{"query":"sum:cadence_worker.persistence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query3"},{"query":"sum:cadence_matching.persistence_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query4"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":2879810317095284,"definition":{"title":"Persistence By Operation Latency(in seconds)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Matching","formula":"query3"},{"alias":"SysWorker","formula":"query4"},{"alias":"Frontend","formula":"query1"},{"alias":"History","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_matching.persistence_latency.quantile{$Availability_Zone,$env,$pXXLatency} by {operation}","data_source":"metrics","name":"query3"},{"query":"avg:cadence_worker.persistence_latency.quantile{$Availability_Zone,$env,$pXXLatency} by {operation}","data_source":"metrics","name":"query4"},{"query":"avg:cadence_frontend.persistence_latency.quantile{$Availability_Zone,$env,$pXXLatency} by {operation}","data_source":"metrics","name":"query1"},{"query":"avg:cadence_history.persistence_latency.quantile{$Availability_Zone,$env,$pXXLatency} by {operation}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7247477649465384,"definition":{"title":"Persistence Error By Operation Count","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Frontend","formula":"query1"},{"alias":"History","formula":"query2"},{"alias":"Worker","formula":"query3"},{"alias":"Matching","formula":"query4"},{"alias":"matching-condition-failed","formula":"query5"},{"alias":"history-shard-owneship-lost","formula":"query6"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.persistence_errors{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.persistence_errors{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query2"},{"query":"sum:cadence_worker.persistence_errors{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query3"},{"query":"sum:cadence_matching.persistence_errors{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query4"},{"query":"sum:cadence_matching.persistence_errors_condition_failed{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query5"},{"query":"sum:cadence_history.persistence_errors_shard_ownership_lost{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query6"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}}]}},{"id":5395592975355724,"definition":{"title":"Persistence-Kafka&ElasticSearch(Visibility)","type":"group","show_title":true,"layout_type":"ordered","widgets":[{"id":4668250662420076,"definition":{"title":"Persistence Availability","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"(1 - query4 / query1) * 100"},{"formula":"(1 - query7 / query2) * 100"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_frontend.elasticsearch_errors{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query4"},{"query":"avg:cadence_frontend.elasticsearch_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query1"},{"query":"avg:cadence_history.elasticsearch_errors{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query7"},{"query":"avg:cadence_history.elasticsearch_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":3775265296683512,"definition":{"title":"Persistence By Service TPS","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Frontend","formula":"query1"},{"alias":"History","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.elasticsearch_requests{$Availability_Zone,$env}.as_rate()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.elasticsearch_requests{$Availability_Zone,$env}.as_rate()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1271758279477046,"definition":{"title":"Persistence By Operation TPS(read: ES, write: Kafka)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Frontend","formula":"query1"},{"alias":"History","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.elasticsearch_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.elasticsearch_requests{$Availability_Zone,$env} by {operation}.as_rate()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":6366659111856686,"definition":{"title":"Persistence By Operation Latency(in seconds) (read: ES, write: Kafka)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Frontend","formula":"query1"},{"alias":"History","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:cadence_frontend.elasticsearch_latency.quantile{$Availability_Zone,$env,$pXXLatency} by {operation}","data_source":"metrics","name":"query1"},{"query":"avg:cadence_history.elasticsearch_latency.quantile{$Availability_Zone,$env,$pXXLatency} by {operation}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7561017233423024,"definition":{"title":"Persistence Error By Operation Count","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Frontend","formula":"query1"},{"alias":"History","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"sum:cadence_frontend.elasticsearch_errors{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_history.elasticsearch_errors{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":148397248547778,"definition":{"title":"Kafka->ES processor counter","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"bulkProcess request","formula":"query1"},{"alias":"bulkProcess retries","formula":"query2"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:cadence_worker.es_processor_requests{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_worker.es_processor_retries{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":4460626966095300,"definition":{"title":"Kafka->ElasticSearch process erorr","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"bulkProcess error","formula":"query1"},{"alias":"bulkProcess corrupted data","formula":"query2"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:cadence_worker.es_processor_error{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query1"},{"query":"sum:cadence_worker.es_processor_corrupted_data{$Availability_Zone,$env} by {operation}.as_count()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":300914954352302,"definition":{"title":"Kafka->ElasticSearch process latency","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"bulkProcess","formula":"query1"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:cadence_worker.es_processor_process_msg_latency.quantile{$Availability_Zone,$env,$pXXLatency} by {operation}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}}]}}],"template_variables":[{"name":"Availability_Zone","default":"*","prefix":"availability-zone","available_values":[]},{"name":"env","default":"qa","prefix":"env","available_values":[]},{"name":"pXXLatency","default":"0.99","prefix":"quantile","available_values":[]}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"template_variable_presets":[{"name":"Prod","template_variables":[{"name":"env","value":"prod"}]},{"name":"QA","template_variables":[]}],"reflow_type":"auto","id":"mv9-qda-zry"}